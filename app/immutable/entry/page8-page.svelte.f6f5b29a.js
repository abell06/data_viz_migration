import{S as De,i as Ke,s as Le,k as V,q as D,a as G,y as he,J as C,l as H,m as v,r as K,h as f,c as J,z as ge,K as P,p as j,n as _,Q as We,L as Ne,b as Q,G as u,A as me,R as qe,g as pe,d as de,B as ve,M as ie,e as ce,N as _e,O as Ue,u as Ge,P as ue,H as Je}from"../chunks/index.6c8fca2d.js";import"../chunks/transform.90f3feb5.js";import{d as $e,l as ae}from"../chunks/violence_rates.261278f0.js";import{B as Ae}from"../chunks/ButtonContainer.d93c7555.js";function Ie(l,e,n){const t=l.slice();return t[25]=e[n],t[27]=n,t}function Ce(l,e,n){const t=l.slice();return t[28]=e[n],t}function Pe(l,e,n){const t=l.slice();return t[31]=e[n],t}function Se(l,e,n){const t=l.slice();return t[34]=e[n],t}function Me(l){let e,n=l[34].text+"",t,r,i,o;function m(){return l[19](l[34])}return{c(){e=V("button"),t=D(n),r=G(),this.h()},l(h){e=H(h,"BUTTON",{class:!0,"data-name":!0});var a=v(e);t=K(a,n),r=J(a),a.forEach(f),this.h()},h(){_(e,"class","btn svelte-zcackt"),_(e,"data-name",l[34].text),e.value=l[34],ue(e,"active",l[0]===l[34])},m(h,a){Q(h,e,a),u(e,t),u(e,r),i||(o=_e(e,"click",m),i=!0)},p(h,a){l=h,a[0]&2049&&ue(e,"active",l[0]===l[34])},d(h){h&&f(e),i=!1,o()}}}function Qe(l){let e,n=l[11],t=[];for(let r=0;r<n.length;r+=1)t[r]=Me(Se(l,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ce()},l(r){for(let i=0;i<t.length;i+=1)t[i].l(r);e=ce()},m(r,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,i);Q(r,e,i)},p(r,i){if(i[0]&2049){n=r[11];let o;for(o=0;o<n.length;o+=1){const m=Se(r,n,o);t[o]?t[o].p(m,i):(t[o]=Me(m),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){ie(t,r),r&&f(e)}}}function Be(l){let e,n=l[31].filter+"",t,r,i,o;function m(){return l[20](l[31])}return{c(){e=V("button"),t=D(n),r=G(),this.h()},l(h){e=H(h,"BUTTON",{class:!0,"data-name":!0});var a=v(e);t=K(a,n),r=J(a),a.forEach(f),this.h()},h(){_(e,"class","btn svelte-zcackt"),_(e,"data-name",l[31].filter),e.value=l[31],ue(e,"active",l[1]===l[31])},m(h,a){Q(h,e,a),u(e,t),u(e,r),i||(o=_e(e,"click",m),i=!0)},p(h,a){l=h,a[0]&4098&&ue(e,"active",l[1]===l[31])},d(h){h&&f(e),i=!1,o()}}}function Re(l){let e,n=l[12],t=[];for(let r=0;r<n.length;r+=1)t[r]=Be(Pe(l,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ce()},l(r){for(let i=0;i<t.length;i+=1)t[i].l(r);e=ce()},m(r,i){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,i);Q(r,e,i)},p(r,i){if(i[0]&4098){n=r[12];let o;for(o=0;o<n.length;o+=1){const m=Pe(r,n,o);t[o]?t[o].p(m,i):(t[o]=Be(m),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){ie(t,r),r&&f(e)}}}function Oe(l){let e,n,t,r=l[28]*100+"",i,o,m=l[28]===4?" % reporting violence":"",h,a;return{c(){e=C("g"),n=C("line"),t=C("text"),i=D(r),o=D("% "),h=D(m),this.h()},l(p){e=P(p,"g",{class:!0,transform:!0});var E=v(e);n=P(E,"line",{x2:!0,class:!0}),v(n).forEach(f),t=P(E,"text",{y:!0,class:!0});var F=v(t);i=K(F,r),o=K(F,"% "),h=K(F,m),F.forEach(f),E.forEach(f),this.h()},h(){_(n,"x2","100%"),_(n,"class","svelte-zcackt"),_(t,"y","-4"),_(t,"class","svelte-zcackt"),_(e,"class","tick tick-"+l[28]+" svelte-zcackt"),_(e,"transform",a="translate(0, "+l[9](l[28])+")")},m(p,E){Q(p,e,E),u(e,n),u(e,t),u(t,i),u(t,o),u(t,h)},p(p,E){E[0]&512&&a!==(a="translate(0, "+p[9](p[28])+")")&&_(e,"transform",a)},d(p){p&&f(e)}}}function Ve(l){let e,n,t,r,i,o,m;function h(...a){return l[21](l[27],...a)}return{c(){e=C("rect"),this.h()},l(a){e=P(a,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),v(e).forEach(f),this.h()},h(){_(e,"x",n=l[8](l[27])+2),_(e,"y",t=l[9](l[25])),_(e,"width",r=l[10]-4),_(e,"height",i=l[9](0)-l[9](l[25])),_(e,"class","svelte-zcackt")},m(a,p){Q(a,e,p),o||(m=[_e(e,"mouseover",h),_e(e,"mouseout",l[22])],o=!0)},p(a,p){l=a,p[0]&256&&n!==(n=l[8](l[27])+2)&&_(e,"x",n),p[0]&640&&t!==(t=l[9](l[25]))&&_(e,"y",t),p[0]&1024&&r!==(r=l[10]-4)&&_(e,"width",r),p[0]&640&&i!==(i=l[9](0)-l[9](l[25]))&&_(e,"height",i)},d(a){a&&f(e),o=!1,Ue(m)}}}function He(l){let e=l[2][l[5]]+"",n;return{c(){n=D(e)},l(t){n=K(t,e)},m(t,r){Q(t,n,r)},p(t,r){r[0]&36&&e!==(e=t[2][t[5]]+"")&&Ge(n,e)},d(t){t&&f(n)}}}function Xe(l){let e,n,t,r,i,o,m,h,a,p,E,F,N,U,S,q,T,y,w,$,M,B,te,L,le,W,ne,s,O,fe,A,re,R;m=new Ae({props:{$$slots:{default:[Qe]},$$scope:{ctx:l}}}),S=new Ae({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}});let Z=l[13],b=[];for(let c=0;c<Z.length;c+=1)b[c]=Oe(Ce(l,Z,c));let ee=l[7],k=[];for(let c=0;c<ee.length;c+=1)k[c]=Ve(Ie(l,ee,c));let z=l[5]!==-1&&He(l);return{c(){e=V("main"),n=V("div"),t=V("section"),r=V("p"),i=D("Filter by violence type"),o=G(),he(m.$$.fragment),h=G(),a=V("section"),p=V("p"),E=D("Choose comparator"),F=G(),N=V("p"),U=G(),he(S.$$.fragment),q=G(),T=V("div"),y=C("svg"),w=C("g");for(let c=0;c<b.length;c+=1)b[c].c();$=C("g"),M=C("g"),B=C("text"),te=D("Highest rate of reported violence"),L=C("text"),le=D("Lowest rate of reported violence"),W=C("text"),ne=D("of migrants reporting violence"),s=C("g");for(let c=0;c<k.length;c+=1)k[c].c();fe=G(),A=V("div"),z&&z.c(),this.h()},l(c){e=H(c,"MAIN",{class:!0});var d=v(e);n=H(d,"DIV",{class:!0});var x=v(n);t=H(x,"SECTION",{class:!0});var X=v(t);r=H(X,"P",{style:!0});var g=v(r);i=K(g,"Filter by violence type"),g.forEach(f),o=J(X),ge(m.$$.fragment,X),X.forEach(f),h=J(x),a=H(x,"SECTION",{class:!0});var I=v(a);p=H(I,"P",{style:!0});var ye=v(p);E=K(ye,"Choose comparator"),ye.forEach(f),F=J(I),N=H(I,"P",{style:!0}),v(N).forEach(f),U=J(I),ge(S.$$.fragment,I),I.forEach(f),x.forEach(f),q=J(d),T=H(d,"DIV",{class:!0});var be=v(T);y=P(be,"svg",{class:!0});var se=v(y);w=P(se,"g",{class:!0});var ke=v(w);for(let Y=0;Y<b.length;Y+=1)b[Y].l(ke);ke.forEach(f),$=P(se,"g",{class:!0});var xe=v($);M=P(xe,"g",{class:!0});var oe=v(M);B=P(oe,"text",{x:!0,y:!0,class:!0});var Ee=v(B);te=K(Ee,"Highest rate of reported violence"),Ee.forEach(f),L=P(oe,"text",{x:!0,y:!0,class:!0});var ze=v(L);le=K(ze,"Lowest rate of reported violence"),ze.forEach(f),W=P(oe,"text",{x:!0,y:!0,class:!0});var we=v(W);ne=K(we,"of migrants reporting violence"),we.forEach(f),oe.forEach(f),xe.forEach(f),s=P(se,"g",{class:!0});var Fe=v(s);for(let Y=0;Y<k.length;Y+=1)k[Y].l(Fe);Fe.forEach(f),se.forEach(f),be.forEach(f),fe=J(d),A=H(d,"DIV",{class:!0,style:!0});var Te=v(A);z&&z.l(Te),Te.forEach(f),d.forEach(f),this.h()},h(){j(r,"margin-top","0px"),_(t,"class","left_buttons"),j(p,"margin-top","0px"),j(N,"margin-top","10px"),_(a,"class","right_buttons"),_(n,"class","buttons_grid"),_(w,"class","axis y-axis svelte-zcackt"),_(B,"x","0"),_(B,"y","500"),_(B,"class","svelte-zcackt"),_(L,"x","500"),_(L,"y","500"),_(L,"class","svelte-zcackt"),_(W,"x","65"),_(W,"y","15"),_(W,"class","svelte-zcackt"),_(M,"class","tick svelte-zcackt"),_($,"class","axis x-axis svelte-zcackt"),_(s,"class","bars svelte-zcackt"),_(y,"class","svelte-zcackt"),_(T,"class","chart svelte-zcackt"),We(()=>l[23].call(T)),_(A,"class",re=Ne(l[5]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-zcackt"),j(A,"left",l[6].x+"px"),j(A,"top",l[6].y-1e3+"px"),_(e,"class","svelte-zcackt")},m(c,d){Q(c,e,d),u(e,n),u(n,t),u(t,r),u(r,i),u(t,o),me(m,t,null),u(n,h),u(n,a),u(a,p),u(p,E),u(a,F),u(a,N),u(a,U),me(S,a,null),u(e,q),u(e,T),u(T,y),u(y,w);for(let x=0;x<b.length;x+=1)b[x]&&b[x].m(w,null);u(y,$),u($,M),u(M,B),u(B,te),u(M,L),u(L,le),u(M,W),u(W,ne),u(y,s);for(let x=0;x<k.length;x+=1)k[x]&&k[x].m(s,null);O=qe(T,l[23].bind(T)),u(e,fe),u(e,A),z&&z.m(A,null),R=!0},p(c,d){const x={};d[0]&1|d[1]&64&&(x.$$scope={dirty:d,ctx:c}),m.$set(x);const X={};if(d[0]&2|d[1]&64&&(X.$$scope={dirty:d,ctx:c}),S.$set(X),d[0]&8704){Z=c[13];let g;for(g=0;g<Z.length;g+=1){const I=Ce(c,Z,g);b[g]?b[g].p(I,d):(b[g]=Oe(I),b[g].c(),b[g].m(w,null))}for(;g<b.length;g+=1)b[g].d(1);b.length=Z.length}if(d[0]&2016){ee=c[7];let g;for(g=0;g<ee.length;g+=1){const I=Ie(c,ee,g);k[g]?k[g].p(I,d):(k[g]=Ve(I),k[g].c(),k[g].m(s,null))}for(;g<k.length;g+=1)k[g].d(1);k.length=ee.length}c[5]!==-1?z?z.p(c,d):(z=He(c),z.c(),z.m(A,null)):z&&(z.d(1),z=null),(!R||d[0]&32&&re!==(re=Ne(c[5]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-zcackt"))&&_(A,"class",re),(!R||d[0]&64)&&j(A,"left",c[6].x+"px"),(!R||d[0]&64)&&j(A,"top",c[6].y-1e3+"px")},i(c){R||(pe(m.$$.fragment,c),pe(S.$$.fragment,c),R=!0)},o(c){de(m.$$.fragment,c),de(S.$$.fragment,c),R=!1},d(c){c&&f(e),ve(m),ve(S),ie(b,c),ie(k,c),O(),z&&z.d()}}}function Ye(l,e,n){let t,r,i=-1,o={x:0,y:0};const m=[{text:"Any incident of violence",violence_type:"experienced_violence_yn",filterFunction:s=>!s.violence_strings.includes("None")},{text:"Threat/ Intimidation",violence_type:"mig_ext_violence/5",filterFunction:s=>s.violence_strings.includes("Threat / Intimidation")},{text:"Physical aggression",violence_type:"mig_ext_violence/6",filterFunction:s=>s.violence_strings.includes("Physical aggression")},{text:"Extortion/ attempted extortion",violence_type:"mig_ext_violence/2",filterFunction:s=>s.violence_strings.includes("Extortion / Attempted extortion")},{text:"Armed robbery",violence_type:"mig_ext_violence/4",filterFunction:s=>s.violence_strings.includes("Armed robbery")},{text:"Theft",violence_type:"mig_ext_violence/3",filterFunction:s=>s.violence_strings.includes("Theft")},{text:"Sexual harassment or assault",violence_type:"mig_ext_violence/7",filterFunction:s=>s.violence_strings.includes("Sexual harassment or assault")},{text:"Kidnapping/ Attempted kidnapping",violence_type:"mig_ext_violence/8",filterFunction:s=>s.violence_strings.includes("Kidnapping / Attempted kidnapping")},{text:"Attemped murder",violence_type:"mig_ext_violence/9",filterFunction:s=>s.violence_strings.includes("Attempted murder")},{text:"Passed away or missing",violence_type:"mig_ext_violence/10",filterFunction:s=>s.violence_strings.includes("Passed away or whereabouts are unknown")}];let h=m[0],a=h.violence_type,p=[{filter:"Compare by motivation to migrate",select_by:"mig_ext_motivo",filterFunction:s=>s.motivation===1,left_text:"Migrants motivated by deteriorating livelihoods from natural hazards",text:" (floods, droughts, volcanic eruptions, hurricanes, plagues, etc.) were more likely to experience violence than those migrating for other reasons."},{filter:"Compare by accompanying travelers",select_by:"mig_ext_acompany",filterFunction:s=>s.acompany===1,left_text:"Migrants traveling alone"},{filter:"Compare by mode of travel",select_by:"mig_ext_medio",filterFunction:s=>s.medio===1,left_text:"Migrants traveling in a caravan"}],E=p[0],F=$e.filter(s=>s.select_by==E.select_by),N=F.sort((s,O)=>s[a]<O[a]?1:s[a]>O[a]?-1:0),U=N.map(s=>s.categories),S=N.map(s=>s[a]).map(Number),q=U;const T=[.1,.2,.3,.4,.5,.6],y={top:20,right:15,bottom:20,left:65};let w=500,$=200,M=ae().domain([0,q.length]).range([y.left,w-y.right]),B=ae().domain([0,Math.max.apply(null,T)]).range([$-y.bottom,y.top]);const te=s=>n(0,h=s),L=s=>n(1,E=s),le=(s,O)=>{n(5,i=s),n(6,o={x:O.pageX,y:O.pageY})},W=s=>{n(5,i=-1)};function ne(){w=this.clientWidth,$=this.clientHeight,n(3,w),n(4,$)}return l.$$.update=()=>{l.$$.dirty[0]&114695&&(n(14,a=h.violence_type),n(15,F=$e.filter(s=>s.select_by==E.select_by)),n(16,N=F.sort((s,O)=>s[a]<O[a]?1:s[a]>O[a]?-1:0)),n(2,U=N.map(s=>s.categories)),n(7,S=N.map(s=>s[a]).map(Number)),n(17,q=U)),l.$$.dirty[0]&131080&&n(8,M=ae().domain([0,q.length]).range([y.left,w-y.right])),l.$$.dirty[0]&16&&n(9,B=ae().domain([0,Math.max.apply(null,T)]).range([$-y.bottom,y.top])),l.$$.dirty[0]&8&&n(18,t=w-(y.left+y.right)),l.$$.dirty[0]&393216&&n(10,r=t/q.length)},[h,E,U,w,$,i,o,S,M,B,r,m,p,T,a,F,N,q,t,te,L,le,W,ne]}class je extends De{constructor(e){super(),Ke(this,e,Ye,Xe,Le,{},null,[-1,-1])}}function Ze(l){let e,n;return e=new je({}),{c(){he(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,r){me(e,t,r),n=!0},p:Je,i(t){n||(pe(e.$$.fragment,t),n=!0)},o(t){de(e.$$.fragment,t),n=!1},d(t){ve(e,t)}}}class rt extends De{constructor(e){super(),Ke(this,e,null,Ze,Le,{})}}export{rt as default};
