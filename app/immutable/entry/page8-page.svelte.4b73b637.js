import{S as He,i as De,s as Ke,k as O,q as H,a as U,y as he,J as P,l as V,m as v,r as D,h as f,c as G,z as pe,K as C,p as Y,n as _,Q as Le,L as Ne,b as J,G as u,A as de,R as We,g as ge,d as me,B as ve,M as ae,e as ce,N as _e,O as qe,u as Ue,P as ue,H as Ge}from"../chunks/index.6c8fca2d.js";import"../chunks/transform.90f3feb5.js";import{d as $e,l as ie}from"../chunks/violence_rates.261278f0.js";import{B as Ae}from"../chunks/ButtonContainer.d93c7555.js";function Ie(l,e,n){const t=l.slice();return t[25]=e[n],t[27]=n,t}function Pe(l,e,n){const t=l.slice();return t[28]=e[n],t}function Ce(l,e,n){const t=l.slice();return t[31]=e[n],t}function Se(l,e,n){const t=l.slice();return t[34]=e[n],t}function Me(l){let e,n=l[34].text+"",t,r,a,o;function d(){return l[19](l[34])}return{c(){e=O("button"),t=H(n),r=U(),this.h()},l(h){e=V(h,"BUTTON",{class:!0,"data-name":!0});var i=v(e);t=D(i,n),r=G(i),i.forEach(f),this.h()},h(){_(e,"class","btn svelte-19dpjpj"),_(e,"data-name",l[34].text),e.value=l[34],ue(e,"active",l[0]===l[34])},m(h,i){J(h,e,i),u(e,t),u(e,r),a||(o=_e(e,"click",d),a=!0)},p(h,i){l=h,i[0]&2049&&ue(e,"active",l[0]===l[34])},d(h){h&&f(e),a=!1,o()}}}function Je(l){let e,n=l[11],t=[];for(let r=0;r<n.length;r+=1)t[r]=Me(Se(l,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ce()},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=ce()},m(r,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,a);J(r,e,a)},p(r,a){if(a[0]&2049){n=r[11];let o;for(o=0;o<n.length;o+=1){const d=Se(r,n,o);t[o]?t[o].p(d,a):(t[o]=Me(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){ae(t,r),r&&f(e)}}}function ze(l){let e,n=l[31].filter+"",t,r,a,o;function d(){return l[20](l[31])}return{c(){e=O("button"),t=H(n),r=U(),this.h()},l(h){e=V(h,"BUTTON",{class:!0,"data-name":!0});var i=v(e);t=D(i,n),r=G(i),i.forEach(f),this.h()},h(){_(e,"class","btn svelte-19dpjpj"),_(e,"data-name",l[31].filter),e.value=l[31],ue(e,"active",l[1]===l[31])},m(h,i){J(h,e,i),u(e,t),u(e,r),a||(o=_e(e,"click",d),a=!0)},p(h,i){l=h,i[0]&4098&&ue(e,"active",l[1]===l[31])},d(h){h&&f(e),a=!1,o()}}}function Qe(l){let e,n=l[12],t=[];for(let r=0;r<n.length;r+=1)t[r]=ze(Ce(l,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ce()},l(r){for(let a=0;a<t.length;a+=1)t[a].l(r);e=ce()},m(r,a){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(r,a);J(r,e,a)},p(r,a){if(a[0]&4098){n=r[12];let o;for(o=0;o<n.length;o+=1){const d=Ce(r,n,o);t[o]?t[o].p(d,a):(t[o]=ze(d),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},d(r){ae(t,r),r&&f(e)}}}function Be(l){let e,n,t,r=l[28]*100+"",a,o,d=l[28]===4?" % reporting violence":"",h,i;return{c(){e=P("g"),n=P("line"),t=P("text"),a=H(r),o=H("% "),h=H(d),this.h()},l(g){e=C(g,"g",{class:!0,transform:!0});var k=v(e);n=C(k,"line",{x2:!0,class:!0}),v(n).forEach(f),t=C(k,"text",{y:!0,class:!0});var F=v(t);a=D(F,r),o=D(F,"% "),h=D(F,d),F.forEach(f),k.forEach(f),this.h()},h(){_(n,"x2","100%"),_(n,"class","svelte-19dpjpj"),_(t,"y","-4"),_(t,"class","svelte-19dpjpj"),_(e,"class","tick tick-"+l[28]+" svelte-19dpjpj"),_(e,"transform",i="translate(0, "+l[9](l[28])+")")},m(g,k){J(g,e,k),u(e,n),u(e,t),u(t,a),u(t,o),u(t,h)},p(g,k){k[0]&512&&i!==(i="translate(0, "+g[9](g[28])+")")&&_(e,"transform",i)},d(g){g&&f(e)}}}function Oe(l){let e,n,t,r,a,o,d;function h(...i){return l[21](l[27],...i)}return{c(){e=P("rect"),this.h()},l(i){e=C(i,"rect",{x:!0,y:!0,width:!0,height:!0,class:!0}),v(e).forEach(f),this.h()},h(){_(e,"x",n=l[8](l[27])+2),_(e,"y",t=l[9](l[25])),_(e,"width",r=l[10]-4),_(e,"height",a=l[9](0)-l[9](l[25])),_(e,"class","svelte-19dpjpj")},m(i,g){J(i,e,g),o||(d=[_e(e,"mouseover",h),_e(e,"mouseout",l[22])],o=!0)},p(i,g){l=i,g[0]&256&&n!==(n=l[8](l[27])+2)&&_(e,"x",n),g[0]&640&&t!==(t=l[9](l[25]))&&_(e,"y",t),g[0]&1024&&r!==(r=l[10]-4)&&_(e,"width",r),g[0]&640&&a!==(a=l[9](0)-l[9](l[25]))&&_(e,"height",a)},d(i){i&&f(e),o=!1,qe(d)}}}function Ve(l){let e=l[2][l[5]]+"",n;return{c(){n=H(e)},l(t){n=D(t,e)},m(t,r){J(t,n,r)},p(t,r){r[0]&36&&e!==(e=t[2][t[5]]+"")&&Ue(n,e)},d(t){t&&f(n)}}}function Re(l){let e,n,t,r,a,o,d,h,i,g,k,F,N,q,S,W,T,y,w,$,M,z,te,K,le,L,ne,s,B,fe,A,re,Q;d=new Ae({props:{$$slots:{default:[Je]},$$scope:{ctx:l}}}),S=new Ae({props:{$$slots:{default:[Qe]},$$scope:{ctx:l}}});let Z=l[13],b=[];for(let c=0;c<Z.length;c+=1)b[c]=Be(Pe(l,Z,c));let ee=l[7],j=[];for(let c=0;c<ee.length;c+=1)j[c]=Oe(Ie(l,ee,c));let E=l[5]!==-1&&Ve(l);return{c(){e=O("main"),n=O("div"),t=O("section"),r=O("p"),a=H("Filter by violence type"),o=U(),he(d.$$.fragment),h=U(),i=O("section"),g=O("p"),k=H("Choose comparator"),F=U(),N=O("p"),q=U(),he(S.$$.fragment),W=U(),T=O("div"),y=P("svg"),w=P("g");for(let c=0;c<b.length;c+=1)b[c].c();$=P("g"),M=P("g"),z=P("text"),te=H("Highest rate of reported violence"),K=P("text"),le=H("Lowest rate of reported violence"),L=P("text"),ne=H("of migrants reporting violence"),s=P("g");for(let c=0;c<j.length;c+=1)j[c].c();fe=U(),A=O("div"),E&&E.c(),this.h()},l(c){e=V(c,"MAIN",{class:!0});var m=v(e);n=V(m,"DIV",{class:!0});var x=v(n);t=V(x,"SECTION",{class:!0});var R=v(t);r=V(R,"P",{style:!0});var p=v(r);a=D(p,"Filter by violence type"),p.forEach(f),o=G(R),pe(d.$$.fragment,R),R.forEach(f),h=G(x),i=V(x,"SECTION",{class:!0});var I=v(i);g=V(I,"P",{style:!0});var ye=v(g);k=D(ye,"Choose comparator"),ye.forEach(f),F=G(I),N=V(I,"P",{style:!0}),v(N).forEach(f),q=G(I),pe(S.$$.fragment,I),I.forEach(f),x.forEach(f),W=G(m),T=V(m,"DIV",{class:!0});var be=v(T);y=C(be,"svg",{class:!0});var se=v(y);w=C(se,"g",{class:!0});var je=v(w);for(let X=0;X<b.length;X+=1)b[X].l(je);je.forEach(f),$=C(se,"g",{class:!0});var xe=v($);M=C(xe,"g",{class:!0});var oe=v(M);z=C(oe,"text",{x:!0,y:!0,class:!0});var ke=v(z);te=D(ke,"Highest rate of reported violence"),ke.forEach(f),K=C(oe,"text",{x:!0,y:!0,class:!0});var Ee=v(K);le=D(Ee,"Lowest rate of reported violence"),Ee.forEach(f),L=C(oe,"text",{x:!0,y:!0,class:!0});var we=v(L);ne=D(we,"of migrants reporting violence"),we.forEach(f),oe.forEach(f),xe.forEach(f),s=C(se,"g",{class:!0});var Fe=v(s);for(let X=0;X<j.length;X+=1)j[X].l(Fe);Fe.forEach(f),se.forEach(f),be.forEach(f),fe=G(m),A=V(m,"DIV",{class:!0,style:!0});var Te=v(A);E&&E.l(Te),Te.forEach(f),m.forEach(f),this.h()},h(){Y(r,"margin-top","0px"),_(t,"class","left_buttons"),Y(g,"margin-top","0px"),Y(N,"margin-top","10px"),_(i,"class","right_buttons"),_(n,"class","buttons_grid"),_(w,"class","axis y-axis svelte-19dpjpj"),_(z,"x","0"),_(z,"y","500"),_(z,"class","svelte-19dpjpj"),_(K,"x","500"),_(K,"y","500"),_(K,"class","svelte-19dpjpj"),_(L,"x","65"),_(L,"y","15"),_(L,"class","svelte-19dpjpj"),_(M,"class","tick svelte-19dpjpj"),_($,"class","axis x-axis svelte-19dpjpj"),_(s,"class","bars svelte-19dpjpj"),_(y,"class","svelte-19dpjpj"),_(T,"class","chart svelte-19dpjpj"),Le(()=>l[23].call(T)),_(A,"class",re=Ne(l[5]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-19dpjpj"),Y(A,"left",l[6].x+"px"),Y(A,"top",l[6].y-1e3+"px"),_(e,"class","svelte-19dpjpj")},m(c,m){J(c,e,m),u(e,n),u(n,t),u(t,r),u(r,a),u(t,o),de(d,t,null),u(n,h),u(n,i),u(i,g),u(g,k),u(i,F),u(i,N),u(i,q),de(S,i,null),u(e,W),u(e,T),u(T,y),u(y,w);for(let x=0;x<b.length;x+=1)b[x]&&b[x].m(w,null);u(y,$),u($,M),u(M,z),u(z,te),u(M,K),u(K,le),u(M,L),u(L,ne),u(y,s);for(let x=0;x<j.length;x+=1)j[x]&&j[x].m(s,null);B=We(T,l[23].bind(T)),u(e,fe),u(e,A),E&&E.m(A,null),Q=!0},p(c,m){const x={};m[0]&1|m[1]&64&&(x.$$scope={dirty:m,ctx:c}),d.$set(x);const R={};if(m[0]&2|m[1]&64&&(R.$$scope={dirty:m,ctx:c}),S.$set(R),m[0]&8704){Z=c[13];let p;for(p=0;p<Z.length;p+=1){const I=Pe(c,Z,p);b[p]?b[p].p(I,m):(b[p]=Be(I),b[p].c(),b[p].m(w,null))}for(;p<b.length;p+=1)b[p].d(1);b.length=Z.length}if(m[0]&2016){ee=c[7];let p;for(p=0;p<ee.length;p+=1){const I=Ie(c,ee,p);j[p]?j[p].p(I,m):(j[p]=Oe(I),j[p].c(),j[p].m(s,null))}for(;p<j.length;p+=1)j[p].d(1);j.length=ee.length}c[5]!==-1?E?E.p(c,m):(E=Ve(c),E.c(),E.m(A,null)):E&&(E.d(1),E=null),(!Q||m[0]&32&&re!==(re=Ne(c[5]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-19dpjpj"))&&_(A,"class",re),(!Q||m[0]&64)&&Y(A,"left",c[6].x+"px"),(!Q||m[0]&64)&&Y(A,"top",c[6].y-1e3+"px")},i(c){Q||(ge(d.$$.fragment,c),ge(S.$$.fragment,c),Q=!0)},o(c){me(d.$$.fragment,c),me(S.$$.fragment,c),Q=!1},d(c){c&&f(e),ve(d),ve(S),ae(b,c),ae(j,c),B(),E&&E.d()}}}function Xe(l,e,n){let t,r,a=-1,o={x:0,y:0};const d=[{text:"Any incident of violence",violence_type:"experienced_violence_yn",filterFunction:s=>!s.violence_strings.includes("None")},{text:"Threat/ Intimidation",violence_type:"mig_ext_violence/5",filterFunction:s=>s.violence_strings.includes("Threat / Intimidation")},{text:"Physical aggression",violence_type:"mig_ext_violence/6",filterFunction:s=>s.violence_strings.includes("Physical aggression")},{text:"Extortion/ attempted extortion",violence_type:"mig_ext_violence/2",filterFunction:s=>s.violence_strings.includes("Extortion / Attempted extortion")},{text:"Armed robbery",violence_type:"mig_ext_violence/4",filterFunction:s=>s.violence_strings.includes("Armed robbery")},{text:"Theft",violence_type:"mig_ext_violence/3",filterFunction:s=>s.violence_strings.includes("Theft")},{text:"Sexual harassment or assault",violence_type:"mig_ext_violence/7",filterFunction:s=>s.violence_strings.includes("Sexual harassment or assault")},{text:"Kidnapping/ Attempted kidnapping",violence_type:"mig_ext_violence/8",filterFunction:s=>s.violence_strings.includes("Kidnapping / Attempted kidnapping")},{text:"Attemped murder",violence_type:"mig_ext_violence/9",filterFunction:s=>s.violence_strings.includes("Attempted murder")},{text:"Passed away or missing",violence_type:"mig_ext_violence/10",filterFunction:s=>s.violence_strings.includes("Passed away or whereabouts are unknown")}];let h=d[0],i=h.violence_type,g=[{filter:"Compare by motivation to migrate",select_by:"mig_ext_motivo",filterFunction:s=>s.motivation===1,left_text:"Migrants motivated by deteriorating livelihoods from natural hazards",text:"People migrating because of deterioration of livelihoods due to natural hazards (floods, droughts, volcanic eruptions, hurricanes, plagues, etc.) were more likely to experience violence than those migrating for other reasons."},{filter:"Compare by accompanying travelers",select_by:"mig_ext_acompany",filterFunction:s=>s.acompany===1,left_text:"Migrants traveling alone"},{filter:"Compare by mode of travel",select_by:"mig_ext_medio",filterFunction:s=>s.medio===1,left_text:"Migrants traveling in a caravan"}],k=g[0],F=$e.filter(s=>s.select_by==k.select_by),N=F.sort((s,B)=>s[i]<B[i]?1:s[i]>B[i]?-1:0),q=N.map(s=>s.categories),S=N.map(s=>s[i]).map(Number),W=q;const T=[.1,.2,.3,.4,.5,.6],y={top:20,right:15,bottom:20,left:65};let w=500,$=200,M=ie().domain([0,W.length]).range([y.left,w-y.right]),z=ie().domain([0,Math.max.apply(null,T)]).range([$-y.bottom,y.top]);const te=s=>n(0,h=s),K=s=>n(1,k=s),le=(s,B)=>{n(5,a=s),n(6,o={x:B.pageX,y:B.pageY})},L=s=>{n(5,a=-1)};function ne(){w=this.clientWidth,$=this.clientHeight,n(3,w),n(4,$)}return l.$$.update=()=>{l.$$.dirty[0]&114695&&(n(14,i=h.violence_type),n(15,F=$e.filter(s=>s.select_by==k.select_by)),n(16,N=F.sort((s,B)=>s[i]<B[i]?1:s[i]>B[i]?-1:0)),n(2,q=N.map(s=>s.categories)),n(7,S=N.map(s=>s[i]).map(Number)),n(17,W=q)),l.$$.dirty[0]&131080&&n(8,M=ie().domain([0,W.length]).range([y.left,w-y.right])),l.$$.dirty[0]&16&&n(9,z=ie().domain([0,Math.max.apply(null,T)]).range([$-y.bottom,y.top])),l.$$.dirty[0]&8&&n(18,t=w-(y.left+y.right)),l.$$.dirty[0]&393216&&n(10,r=t/W.length)},[h,k,q,w,$,a,o,S,M,z,r,d,g,T,i,F,N,W,t,te,K,le,L,ne]}class Ye extends He{constructor(e){super(),De(this,e,Xe,Re,Ke,{},null,[-1,-1])}}function Ze(l){let e,n;return e=new Ye({}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,r){de(e,t,r),n=!0},p:Ge,i(t){n||(ge(e.$$.fragment,t),n=!0)},o(t){me(e.$$.fragment,t),n=!1},d(t){ve(e,t)}}}class rt extends He{constructor(e){super(),De(this,e,null,Ze,Ke,{})}}export{rt as default};
