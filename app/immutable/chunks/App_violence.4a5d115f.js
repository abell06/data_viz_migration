import{S as te,i as le,s as se,k as B,J as x,a as C,l as I,m as b,K as O,h as g,c as L,n as r,L as H,p as V,b as A,G as y,H as R,M as re,N as G,O as ie,q as F,r as M,u as oe,y as ce,z as _e,A as ue,g as ve,d as he,B as de}from"./index.6dba7111.js";import"./transform.90f3feb5.js";import{r as J,I as K,o as X,p as Y,h as Q,a as q}from"./all_violence_data.2787399c.js";function U(l,n,e){const a=l.slice();return a[23]=n[e],a[25]=e,a}function W(l){let n,e,a,c,s,h,p,u,_,i,d,o,v,w,k;function D(...f){return l[15](l[23],...f)}return{c(){n=x("g"),e=x("svg"),a=x("svg"),c=x("g"),s=x("path"),_=x("clipPath"),i=x("circle"),this.h()},l(f){n=O(f,"g",{class:!0,transform:!0});var m=b(n);e=O(m,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var z=b(e);a=O(z,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var S=b(a);c=O(S,"g",{"ns:extraneous":!0,class:!0});var P=b(c);s=O(P,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),b(s).forEach(g),P.forEach(g),S.forEach(g),z.forEach(g),_=O(m,"clipPath",{id:!0});var E=b(_);i=O(E,"circle",{r:!0}),b(i).forEach(g),E.forEach(g),m.forEach(g),this.h()},h(){r(s,"stroke-width","1.25"),r(s,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),r(s,"fill",h=l[0]?l[4](l[23].value):ee),r(s,"fill-opacity",ge),r(c,"ns:extraneous","self"),r(c,"class","svelte-1aa1kfe"),r(a,"xmlns","http://www.w3.org/2000/svg"),r(a,"xml:space","preserve"),r(a,"height","132.24px"),r(a,"width","124.19px"),r(a,"version","1.1"),r(a,"x","0px"),r(a,"y","0px"),r(a,"xmlns:ns","&#38;ns_ai;"),r(a,"enable-background","new 0 0 124.189 132.243"),r(a,"viewBox","75 0 44.189 132.243"),r(e,"class","person svelte-1aa1kfe"),r(e,"height",p=2*l[23].r),r(e,"width",u=2*l[23].r),r(e,"viewBox","0 0 100 120"),r(i,"r",d=l[23].r),r(_,"id",o=`${l[9]}-clip-${l[23].data}`),r(n,"class","node svelte-1aa1kfe"),r(n,"transform",v="translate("+l[23].x+","+l[23].y+")")},m(f,m){A(f,n,m),y(n,e),y(e,a),y(a,c),y(c,s),y(n,_),y(_,i),w||(k=[G(e,"mouseover",D),G(e,"mouseout",l[16])],w=!0)},p(f,m){l=f,m&49&&h!==(h=l[0]?l[4](l[23].value):ee)&&r(s,"fill",h),m&32&&p!==(p=2*l[23].r)&&r(e,"height",p),m&32&&u!==(u=2*l[23].r)&&r(e,"width",u),m&32&&d!==(d=l[23].r)&&r(i,"r",d),m&32&&o!==(o=`${l[9]}-clip-${l[23].data}`)&&r(_,"id",o),m&32&&v!==(v="translate("+l[23].x+","+l[23].y+")")&&r(n,"transform",v)},d(f){f&&g(n),w=!1,ie(k)}}}function Z(l){let n,e=l[3][l[1].data]+"",a,c;return{c(){n=F("Type of violence reported: `"),a=F(e),c=F("`")},l(s){n=M(s,"Type of violence reported: `"),a=M(s,e),c=M(s,"`")},m(s,h){A(s,n,h),A(s,a,h),A(s,c,h)},p(s,h){h&10&&e!==(e=s[3][s[1].data]+"")&&oe(a,e)},d(s){s&&g(n),s&&g(a),s&&g(c)}}}function fe(l){let n,e,a,c,s,h,p=l[5],u=[];for(let i=0;i<p.length;i+=1)u[i]=W(U(l,p,i));let _=l[1]!==-1&&Z(l);return{c(){n=B("main"),e=B("div"),a=x("svg");for(let i=0;i<u.length;i+=1)u[i].c();c=C(),s=B("div"),_&&_.c(),this.h()},l(i){n=I(i,"MAIN",{class:!0});var d=b(n);e=I(d,"DIV",{class:!0});var o=b(e);a=O(o,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var v=b(a);for(let k=0;k<u.length;k+=1)u[k].l(v);v.forEach(g),c=L(o),s=I(o,"DIV",{class:!0,style:!0});var w=b(s);_&&_.l(w),w.forEach(g),o.forEach(g),d.forEach(g),this.h()},h(){r(a,"width",j),r(a,"height",l[6]),r(a,"viewBox",-l[7]+" "+-l[8]+" "+j+" "+l[6]),r(a,"fill",pe),r(a,"class","person svelte-1aa1kfe"),r(s,"class",h=H(l[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1aa1kfe"),V(s,"left",l[2].x+2+"px"),V(s,"top",l[2].y-1e3+"px"),r(e,"class","violence_grid svelte-1aa1kfe"),r(n,"class","circles svelte-1aa1kfe")},m(i,d){A(i,n,d),y(n,e),y(e,a);for(let o=0;o<u.length;o+=1)u[o]&&u[o].m(a,null);y(e,c),y(e,s),_&&_.m(s,null)},p(i,[d]){if(d&567){p=i[5];let o;for(o=0;o<p.length;o+=1){const v=U(i,p,o);u[o]?u[o].p(v,d):(u[o]=W(v),u[o].c(),u[o].m(a,null))}for(;o<u.length;o+=1)u[o].d(1);u.length=p.length}i[1]!==-1?_?_.p(i,d):(_=Z(i),_.c(),_.m(s,null)):_&&(_.d(1),_=null),d&2&&h!==(h=H(i[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1aa1kfe")&&r(s,"class",h),d&4&&V(s,"left",i[2].x+2+"px"),d&4&&V(s,"top",i[2].y-1e3+"px")},i:R,o:R,d(i){i&&g(n),re(u,i),_&&_.d()}}}const j=700,$=3,T=1,pe="black",ee="#ccc",ge=.9;function me(l,n,e){let{data_dot:a=[]}=n,c=Object.values(a),s=c.filter(t=>t.experienced_violence_yn==1),h=-1,p={x:0,y:0};const u=j,_=T,i=T,d=T,o=T;c.map(t=>t);let v=c.map(t=>t.experienced_violence_yn),w=c.map(t=>t.experienced_violence_yn),k=J(v.length).filter(t=>v[t]>=0),D=c.map(t=>t.violence_strings),f=k.map(t=>w[t]);f=new K(f);let m=X(f).domain([0,1]).range(["#2E2F48","#F8553D"]);const z=`O-${Math.random().toString(16).slice(2)}`;let S=Y().size([j-_-i,u-d-o]).radius(t=>6).padding($)(Q({children:k}).sum(t=>v[t])),P=S.leaves();console.log(P);let E=P.sort(function(t,N){return t.x-N.x});E[0].value=1,console.log(E[0].value);for(let t=0;t<s.length;t++)E[t].value=1,E[t].data=S.leaves()[a.length-t-1].data,E[t].x=E[t].x-10;for(let t=s.length;t<a.length;t++)E[t].value=0,E[t].data=S.leaves()[0].data;console.log(E),console.log(S.leaves());const ae=(t,N)=>{e(1,h=t),e(2,p={x:N.pageX,y:N.pageY})},ne=t=>{e(1,h=-1)};return l.$$set=t=>{"data_dot"in t&&e(10,a=t.data_dot)},l.$$.update=()=>{l.$$.dirty&3072&&(e(11,c=Object.values(a)),s=c.filter(t=>t.experienced_violence_yn==1)),l.$$.dirty&30721&&(c.map(t=>t),e(12,v=c.map(t=>t.experienced_violence_yn)),e(0,w=c.map(t=>t.experienced_violence_yn)),e(13,k=J(v.length).filter(t=>v[t]>=0)),e(3,D=c.map(t=>t.violence_strings)),e(14,f=k.map(t=>w[t])),e(14,f=new K(f)),e(4,m=X(f).domain([0,1]).range(["#2E2F48","#F8553D"]))),l.$$.dirty&12288&&(S=Y().size([j-_-i,u-d-o]).radius(t=>6).padding($)(Q({children:k}).sum(t=>v[t])))},[w,h,p,D,m,E,u,_,d,z,a,c,v,k,f,ae,ne]}class ye extends te{constructor(n){super(),le(this,n,me,fe,se,{data_dot:10})}}function we(l){let n,e,a,c,s,h,p,u,_,i,d,o;return d=new ye({props:{data_dot:q}}),{c(){n=B("main"),e=B("h3"),a=F("Migrants reporting violence"),c=C(),s=B("div"),h=B("section"),p=B("p"),u=F("Rate of reported violence: "),_=F(l[0]),i=C(),ce(d.$$.fragment),this.h()},l(v){n=I(v,"MAIN",{class:!0});var w=b(n);e=I(w,"H3",{style:!0,class:!0});var k=b(e);a=M(k,"Migrants reporting violence"),k.forEach(g),c=L(w),s=I(w,"DIV",{class:!0});var D=b(s);h=I(D,"SECTION",{class:!0});var f=b(h);p=I(f,"P",{class:!0});var m=b(p);u=M(m,"Rate of reported violence: "),_=M(m,l[0]),m.forEach(g),i=L(f),_e(d.$$.fragment,f),f.forEach(g),D.forEach(g),w.forEach(g),this.h()},h(){V(e,"margin-top","10px"),V(e,"color","#F8553D"),r(e,"class","svelte-oyi84i"),r(p,"class","svelte-oyi84i"),r(h,"class","humans svelte-oyi84i"),r(s,"class","violence_grid svelte-oyi84i"),r(n,"class","svelte-oyi84i")},m(v,w){A(v,n,w),y(n,e),y(e,a),y(n,c),y(n,s),y(s,h),y(h,p),y(p,u),y(p,_),y(h,i),ue(d,h,null),o=!0},p:R,i(v){o||(ve(d.$$.fragment,v),o=!0)},o(v){he(d.$$.fragment,v),o=!1},d(v){v&&g(n),de(d)}}}function ke(l){let n=q.filter(s=>s.experienced_violence_yn==1),e=q.filter(s=>s.experienced_violence_yn==0),a=Object.keys(n).length/(Object.keys(n).length+Object.keys(e).length);return[Number(a).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class xe extends te{constructor(n){super(),le(this,n,ke,we,se,{})}}export{xe as A,ye as S};
