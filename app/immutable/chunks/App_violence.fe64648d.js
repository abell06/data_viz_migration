import{S as J,i as K,s as X,k as O,J as j,a as C,l as S,m as E,K as F,h as g,c as H,n as c,L as Q,p as N,b as M,G as w,H as Y,M as pe,N as U,O as ge,q as P,r as z,u as ye,v as be,d as A,f as we,g as L,Y as ke,o as Ee,C as ae,D as re,E as ce,F as ue,y as fe,z as _e,A as de,B as ve}from"./index.6c8fca2d.js";import"./transform.90f3feb5.js";import{r as W,I as Z,o as x,p as $,h as ee,a as G}from"./all_violence_data.642793a1.js";function te(n,t,e){const l=n.slice();return l[23]=t[e],l[25]=e,l}function le(n){let t,e,l,i,s,o,f,v,u,h,p,d,m,_,k;function b(...a){return n[15](n[23],...a)}return{c(){t=j("g"),e=j("svg"),l=j("svg"),i=j("g"),s=j("path"),u=j("clipPath"),h=j("circle"),this.h()},l(a){t=F(a,"g",{class:!0,transform:!0});var y=E(t);e=F(y,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var B=E(e);l=F(B,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var I=E(l);i=F(I,"g",{"ns:extraneous":!0,class:!0});var V=E(i);s=F(V,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),E(s).forEach(g),V.forEach(g),I.forEach(g),B.forEach(g),u=F(y,"clipPath",{id:!0});var D=E(u);h=F(D,"circle",{r:!0}),E(h).forEach(g),D.forEach(g),y.forEach(g),this.h()},h(){c(s,"stroke-width","1.25"),c(s,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),c(s,"fill",o=n[0]?n[4](n[23].value):ie),c(s,"fill-opacity",Oe),c(i,"ns:extraneous","self"),c(i,"class","svelte-1oyck2n"),c(l,"xmlns","http://www.w3.org/2000/svg"),c(l,"xml:space","preserve"),c(l,"height","132.24px"),c(l,"width","124.19px"),c(l,"version","1.1"),c(l,"x","0px"),c(l,"y","0px"),c(l,"xmlns:ns","&#38;ns_ai;"),c(l,"enable-background","new 0 0 124.189 132.243"),c(l,"viewBox","75 0 44.189 132.243"),c(e,"class","person"),c(e,"height",f=2*n[23].r),c(e,"width",v=2*n[23].r),c(e,"viewBox","0 0 100 120"),c(h,"r",p=n[23].r),c(u,"id",d=`${n[9]}-clip-${n[23].data}`),c(t,"class","node svelte-1oyck2n"),c(t,"transform",m="translate("+n[23].x+","+n[23].y+")")},m(a,y){M(a,t,y),w(t,e),w(e,l),w(l,i),w(i,s),w(t,u),w(u,h),_||(k=[U(e,"mouseover",b),U(e,"mouseout",n[16])],_=!0)},p(a,y){n=a,y&49&&o!==(o=n[0]?n[4](n[23].value):ie)&&c(s,"fill",o),y&32&&f!==(f=2*n[23].r)&&c(e,"height",f),y&32&&v!==(v=2*n[23].r)&&c(e,"width",v),y&32&&p!==(p=n[23].r)&&c(h,"r",p),y&32&&d!==(d=`${n[9]}-clip-${n[23].data}`)&&c(u,"id",d),y&32&&m!==(m="translate("+n[23].x+","+n[23].y+")")&&c(t,"transform",m)},d(a){a&&g(t),_=!1,ge(k)}}}function ne(n){let t,e=n[3][n[1].data].join(", ")+"",l;return{c(){t=P("Type of violence reported: "),l=P(e)},l(i){t=z(i,"Type of violence reported: "),l=z(i,e)},m(i,s){M(i,t,s),M(i,l,s)},p(i,s){s&10&&e!==(e=i[3][i[1].data].join(", ")+"")&&ye(l,e)},d(i){i&&g(t),i&&g(l)}}}function se(n){let t;return{c(){t=P("No violence reported.")},l(e){t=z(e,"No violence reported.")},m(e,l){M(e,t,l)},d(e){e&&g(t)}}}function Ie(n){let t,e,l,i,s,o,f,v=n[5],u=[];for(let d=0;d<v.length;d+=1)u[d]=le(te(n,v,d));let h=n[1]!==-1&&n[1].value==1&&ne(n),p=n[1]!==-1&&n[1].value==0&&se();return{c(){t=O("main"),e=O("div"),l=j("svg");for(let d=0;d<u.length;d+=1)u[d].c();i=C(),s=O("div"),h&&h.c(),o=C(),p&&p.c(),this.h()},l(d){t=S(d,"MAIN",{class:!0});var m=E(t);e=S(m,"DIV",{class:!0});var _=E(e);l=F(_,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var k=E(l);for(let a=0;a<u.length;a+=1)u[a].l(k);k.forEach(g),i=H(_),s=S(_,"DIV",{class:!0,style:!0});var b=E(s);h&&h.l(b),o=H(b),p&&p.l(b),b.forEach(g),_.forEach(g),m.forEach(g),this.h()},h(){c(l,"width",R),c(l,"height",n[6]),c(l,"viewBox",-n[7]+" "+-n[8]+" "+R+" "+n[6]),c(l,"fill",De),c(l,"class","person"),c(s,"class",f=Q(n[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1oyck2n"),N(s,"left",n[2].x+"px"),N(s,"top",n[2].y-2600+"px"),c(e,"class","violence_grid svelte-1oyck2n"),c(t,"class","circles svelte-1oyck2n")},m(d,m){M(d,t,m),w(t,e),w(e,l);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(l,null);w(e,i),w(e,s),h&&h.m(s,null),w(s,o),p&&p.m(s,null)},p(d,[m]){if(m&567){v=d[5];let _;for(_=0;_<v.length;_+=1){const k=te(d,v,_);u[_]?u[_].p(k,m):(u[_]=le(k),u[_].c(),u[_].m(l,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=v.length}d[1]!==-1&&d[1].value==1?h?h.p(d,m):(h=ne(d),h.c(),h.m(s,o)):h&&(h.d(1),h=null),d[1]!==-1&&d[1].value==0?p||(p=se(),p.c(),p.m(s,null)):p&&(p.d(1),p=null),m&2&&f!==(f=Q(d[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1oyck2n")&&c(s,"class",f),m&4&&N(s,"left",d[2].x+"px"),m&4&&N(s,"top",d[2].y-2600+"px")},i:Y,o:Y,d(d){d&&g(t),pe(u,d),h&&h.d(),p&&p.d()}}}const R=700,oe=3,q=1,De="black",ie="#ccc",Oe=.9;function Se(n,t,e){let{data_dot:l=[]}=t,i=Object.values(l),s=i.filter(r=>r.experienced_violence_yn==1),o=-1,f={x:0,y:0};const v=R,u=q,h=q,p=q,d=q;i.map(r=>r);let m=i.map(r=>r.experienced_violence_yn),_=i.map(r=>r.experienced_violence_yn),k=W(m.length).filter(r=>m[r]>=0),b=i.map(r=>r.violence_strings),a=k.map(r=>_[r]);a=new Z(a);let y=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]);const B=`O-${Math.random().toString(16).slice(2)}`;let I=$().size([R-u-h,v-p-d]).radius(r=>7).padding(oe)(ee({children:k}).sum(r=>m[r])),V=I.leaves();console.log(V);let D=V.sort(function(r,T){return r.x-T.x});D[0].value=1,console.log(D[0].value);for(let r=0;r<s.length;r++)D[r].value=1,D[r].data=I.leaves()[l.length-r-1].data,D[r].x=D[r].x-10;for(let r=s.length;r<l.length;r++)D[r].value=0,D[r].data=I.leaves()[0].data;console.log(D),console.log(I.leaves());const he=(r,T)=>{e(1,o=r),e(2,f={x:T.pageX,y:T.pageY})},me=r=>{e(1,o=-1)};return n.$$set=r=>{"data_dot"in r&&e(10,l=r.data_dot)},n.$$.update=()=>{n.$$.dirty&3072&&(e(11,i=Object.values(l)),s=i.filter(r=>r.experienced_violence_yn==1)),n.$$.dirty&30721&&(i.map(r=>r),e(12,m=i.map(r=>r.experienced_violence_yn)),e(0,_=i.map(r=>r.experienced_violence_yn)),e(13,k=W(m.length).filter(r=>m[r]>=0)),e(3,b=i.map(r=>r.violence_strings)),e(14,a=k.map(r=>_[r])),e(14,a=new Z(a)),e(4,y=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]))),n.$$.dirty&12288&&(I=$().size([R-u-h,v-p-d]).radius(r=>6).padding(oe)(ee({children:k}).sum(r=>m[r])))},[_,o,f,b,y,D,v,u,p,B,l,i,m,k,a,he,me]}class Be extends J{constructor(t){super(),K(this,t,Se,Ie,X,{data_dot:10})}}function Ve(n){let t,e,l;const i=n[10].default,s=ae(i,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(o){t=S(o,"DIV",{style:!0});var f=E(t);s&&s.l(f),f.forEach(g),this.h()},h(){c(t,"style",e="animation: "+n[1]+"; "+n[3])},m(o,f){M(o,t,f),s&&s.m(t,null),l=!0},p(o,f){s&&s.p&&(!l||f&512)&&re(s,i,o,o[9],l?ue(i,o[9],f,null):ce(o[9]),null),(!l||f&10&&e!==(e="animation: "+o[1]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(L(s,o),l=!0)},o(o){A(s,o),l=!1},d(o){o&&g(t),s&&s.d(o)}}}function Me(n){let t,e,l;const i=n[10].default,s=ae(i,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(o){t=S(o,"DIV",{style:!0});var f=E(t);s&&s.l(f),f.forEach(g),this.h()},h(){c(t,"style",e="animation: "+n[0]+"; "+n[3])},m(o,f){M(o,t,f),s&&s.m(t,null),l=!0},p(o,f){s&&s.p&&(!l||f&512)&&re(s,i,o,o[9],l?ue(i,o[9],f,null):ce(o[9]),null),(!l||f&9&&e!==(e="animation: "+o[0]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(L(s,o),l=!0)},o(o){A(s,o),l=!1},d(o){o&&g(t),s&&s.d(o)}}}function je(n){let t,e,l,i;const s=[Me,Ve],o=[];function f(v,u){return v[4]?0:1}return e=f(n),l=o[e]=s[e](n),{c(){t=O("div"),l.c(),this.h()},l(v){t=S(v,"DIV",{id:!0,style:!0});var u=E(t);l.l(u),u.forEach(g),this.h()},h(){c(t,"id",n[5]),c(t,"style",n[2])},m(v,u){M(v,t,u),o[e].m(t,null),i=!0},p(v,[u]){let h=e;e=f(v),e===h?o[e].p(v,u):(be(),A(o[h],1,1,()=>{o[h]=null}),we(),l=o[e],l?l.p(v,u):(l=o[e]=s[e](v),l.c()),L(l,1),l.m(t,null)),(!i||u&4)&&c(t,"style",v[2])},i(v){i||(L(l),i=!0)},o(v){A(l),i=!1},d(v){v&&g(t),o[e].d()}}}function Fe(n,t,e){let{$$slots:l={},$$scope:i}=t,{animation:s="none"}=t,{animation_out:o="none; opacity: 0"}=t,{once:f=!1}=t,{top:v=0}=t,{bottom:u=0}=t,{css_observer:h=""}=t,{css_animation:p=""}=t;const d=ke();let m=!0;const _=`__saos-${Math.random()}__`;function k(a){const y=`${-u}px 0px ${-v}px 0px`,B=new IntersectionObserver(I=>{e(4,m=I[0].isIntersecting),m&&f&&B.unobserve(a)},{rootMargin:y});return B.observe(a),()=>B.unobserve(a)}function b(a){const y=a.getBoundingClientRect();return e(4,m=y.top+v<window.innerHeight&&y.bottom-u>0),m&&f&&window.removeEventListener("scroll",verify),window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)}return Ee(()=>{const a=document.getElementById(_);return IntersectionObserver?k(a):b(a)}),n.$$set=a=>{"animation"in a&&e(0,s=a.animation),"animation_out"in a&&e(1,o=a.animation_out),"once"in a&&e(6,f=a.once),"top"in a&&e(7,v=a.top),"bottom"in a&&e(8,u=a.bottom),"css_observer"in a&&e(2,h=a.css_observer),"css_animation"in a&&e(3,p=a.css_animation),"$$scope"in a&&e(9,i=a.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&d("update",{observing:m})},[s,o,h,p,m,_,f,v,u,i,l]}class Ne extends J{constructor(t){super(),K(this,t,Fe,je,X,{animation:0,animation_out:1,once:6,top:7,bottom:8,css_observer:2,css_animation:3})}}function Pe(n){let t,e;return t=new Be({props:{data_dot:G}}),{c(){fe(t.$$.fragment)},l(l){_e(t.$$.fragment,l)},m(l,i){de(t,l,i),e=!0},p:Y,i(l){e||(L(t.$$.fragment,l),e=!0)},o(l){A(t.$$.fragment,l),e=!1},d(l){ve(t,l)}}}function ze(n){let t,e,l,i,s,o,f,v,u,h,p,d,m,_,k;return _=new Ne({props:{animation:"scale-in-center 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both",$$slots:{default:[Pe]},$$scope:{ctx:n}}}),{c(){t=O("main"),e=O("h3"),l=P("Migrants reporting violence"),i=C(),s=O("div"),o=O("section"),f=O("p"),v=P("Rate of reported violence: "),u=P(n[0]),h=C(),p=O("p"),d=P("Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),m=C(),fe(_.$$.fragment),this.h()},l(b){t=S(b,"MAIN",{class:!0});var a=E(t);e=S(a,"H3",{style:!0,class:!0});var y=E(e);l=z(y,"Migrants reporting violence"),y.forEach(g),i=H(a),s=S(a,"DIV",{class:!0});var B=E(s);o=S(B,"SECTION",{class:!0});var I=E(o);f=S(I,"P",{class:!0});var V=E(f);v=z(V,"Rate of reported violence: "),u=z(V,n[0]),V.forEach(g),h=H(I),p=S(I,"P",{style:!0,class:!0});var D=E(p);d=z(D,"Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),D.forEach(g),m=H(I),_e(_.$$.fragment,I),I.forEach(g),B.forEach(g),a.forEach(g),this.h()},h(){N(e,"margin-top","10px"),N(e,"color","#F8553D"),c(e,"class","svelte-1nsa0mw"),c(f,"class","svelte-1nsa0mw"),N(p,"font-style","italic"),c(p,"class","svelte-1nsa0mw"),c(o,"class","humans svelte-1nsa0mw"),c(s,"class","violence_grid svelte-1nsa0mw"),c(t,"class","svelte-1nsa0mw")},m(b,a){M(b,t,a),w(t,e),w(e,l),w(t,i),w(t,s),w(s,o),w(o,f),w(f,v),w(f,u),w(o,h),w(o,p),w(p,d),w(o,m),de(_,o,null),k=!0},p(b,[a]){const y={};a&16&&(y.$$scope={dirty:a,ctx:b}),_.$set(y)},i(b){k||(L(_.$$.fragment,b),k=!0)},o(b){A(_.$$.fragment,b),k=!1},d(b){b&&g(t),ve(_)}}}function Ae(n){let t=G.filter(s=>s.experienced_violence_yn==1),e=G.filter(s=>s.experienced_violence_yn==0),l=Object.keys(t).length/(Object.keys(t).length+Object.keys(e).length);return[Number(l).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class Re extends J{constructor(t){super(),K(this,t,Ae,ze,X,{})}}export{Re as A,Ne as S};
