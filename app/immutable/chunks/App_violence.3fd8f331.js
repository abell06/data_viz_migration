import{S as J,i as K,s as Y,k as D,J as M,a as H,l as O,m as k,K as F,h as p,c as q,n as c,L as Q,p as z,b as B,G as w,H as X,M as me,N as U,O as pe,q as A,r as L,u as ge,v as ye,d as P,f as be,g as j,X as we,o as ke,C as ie,D as ae,E as re,F as ce,y as ue,z as _e,A as fe,B as de}from"./index.b7f29291.js";import"./transform.90f3feb5.js";import{r as W,I as Z,o as x,p as $,h as ee,a as G}from"./all_violence_data.80932636.js";function te(s,t,e){const l=s.slice();return l[23]=t[e],l[25]=e,l}function le(s){let t,e,l,a,n,o,_,r,f,d,m,v,h,g,b;function I(...u){return s[15](s[23],...u)}return{c(){t=M("g"),e=M("svg"),l=M("svg"),a=M("g"),n=M("path"),f=M("clipPath"),d=M("circle"),this.h()},l(u){t=F(u,"g",{class:!0,transform:!0});var y=k(t);e=F(y,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var V=k(e);l=F(V,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var S=k(l);a=F(S,"g",{"ns:extraneous":!0,class:!0});var C=k(a);n=F(C,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),k(n).forEach(p),C.forEach(p),S.forEach(p),V.forEach(p),f=F(y,"clipPath",{id:!0});var E=k(f);d=F(E,"circle",{r:!0}),k(d).forEach(p),E.forEach(p),y.forEach(p),this.h()},h(){c(n,"stroke-width","1.25"),c(n,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),c(n,"fill",o=s[0]?s[4](s[23].value):oe),c(n,"fill-opacity",De),c(a,"ns:extraneous","self"),c(a,"class","svelte-47u41w"),c(l,"xmlns","http://www.w3.org/2000/svg"),c(l,"xml:space","preserve"),c(l,"height","132.24px"),c(l,"width","124.19px"),c(l,"version","1.1"),c(l,"x","0px"),c(l,"y","0px"),c(l,"xmlns:ns","&#38;ns_ai;"),c(l,"enable-background","new 0 0 124.189 132.243"),c(l,"viewBox","75 0 44.189 132.243"),c(e,"class","person"),c(e,"height",_=2*s[23].r),c(e,"width",r=2*s[23].r),c(e,"viewBox","0 0 100 120"),c(d,"r",m=s[23].r),c(f,"id",v=`${s[9]}-clip-${s[23].data}`),c(t,"class","node svelte-47u41w"),c(t,"transform",h="translate("+s[23].x+","+s[23].y+")")},m(u,y){B(u,t,y),w(t,e),w(e,l),w(l,a),w(a,n),w(t,f),w(f,d),g||(b=[U(e,"mouseover",I),U(e,"mouseout",s[16])],g=!0)},p(u,y){s=u,y&49&&o!==(o=s[0]?s[4](s[23].value):oe)&&c(n,"fill",o),y&32&&_!==(_=2*s[23].r)&&c(e,"height",_),y&32&&r!==(r=2*s[23].r)&&c(e,"width",r),y&32&&m!==(m=s[23].r)&&c(d,"r",m),y&32&&v!==(v=`${s[9]}-clip-${s[23].data}`)&&c(f,"id",v),y&32&&h!==(h="translate("+s[23].x+","+s[23].y+")")&&c(t,"transform",h)},d(u){u&&p(t),g=!1,pe(b)}}}function ne(s){let t,e=s[3][s[1].data]+"",l,a;return{c(){t=A("Type of violence reported: `"),l=A(e),a=A("`")},l(n){t=L(n,"Type of violence reported: `"),l=L(n,e),a=L(n,"`")},m(n,o){B(n,t,o),B(n,l,o),B(n,a,o)},p(n,o){o&10&&e!==(e=n[3][n[1].data]+"")&&ge(l,e)},d(n){n&&p(t),n&&p(l),n&&p(a)}}}function Ee(s){let t,e,l,a,n,o,_=s[5],r=[];for(let d=0;d<_.length;d+=1)r[d]=le(te(s,_,d));let f=s[1]!==-1&&ne(s);return{c(){t=D("main"),e=D("div"),l=M("svg");for(let d=0;d<r.length;d+=1)r[d].c();a=H(),n=D("div"),f&&f.c(),this.h()},l(d){t=O(d,"MAIN",{class:!0});var m=k(t);e=O(m,"DIV",{class:!0});var v=k(e);l=F(v,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var h=k(l);for(let b=0;b<r.length;b+=1)r[b].l(h);h.forEach(p),a=q(v),n=O(v,"DIV",{class:!0,style:!0});var g=k(n);f&&f.l(g),g.forEach(p),v.forEach(p),m.forEach(p),this.h()},h(){c(l,"width",N),c(l,"height",s[6]),c(l,"viewBox",-s[7]+" "+-s[8]+" "+N+" "+s[6]),c(l,"fill",Ie),c(l,"class","person"),c(n,"class",o=Q(s[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w"),z(n,"left",s[2].x+2+"px"),z(n,"top",s[2].y-1e3+"px"),c(e,"class","violence_grid svelte-47u41w"),c(t,"class","circles svelte-47u41w")},m(d,m){B(d,t,m),w(t,e),w(e,l);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(l,null);w(e,a),w(e,n),f&&f.m(n,null)},p(d,[m]){if(m&567){_=d[5];let v;for(v=0;v<_.length;v+=1){const h=te(d,_,v);r[v]?r[v].p(h,m):(r[v]=le(h),r[v].c(),r[v].m(l,null))}for(;v<r.length;v+=1)r[v].d(1);r.length=_.length}d[1]!==-1?f?f.p(d,m):(f=ne(d),f.c(),f.m(n,null)):f&&(f.d(1),f=null),m&2&&o!==(o=Q(d[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w")&&c(n,"class",o),m&4&&z(n,"left",d[2].x+2+"px"),m&4&&z(n,"top",d[2].y-1e3+"px")},i:X,o:X,d(d){d&&p(t),me(r,d),f&&f.d()}}}const N=700,se=3,T=1,Ie="black",oe="#ccc",De=.9;function Oe(s,t,e){let{data_dot:l=[]}=t,a=Object.values(l),n=a.filter(i=>i.experienced_violence_yn==1),o=-1,_={x:0,y:0};const r=N,f=T,d=T,m=T,v=T;a.map(i=>i);let h=a.map(i=>i.experienced_violence_yn),g=a.map(i=>i.experienced_violence_yn),b=W(h.length).filter(i=>h[i]>=0),I=a.map(i=>i.violence_strings),u=b.map(i=>g[i]);u=new Z(u);let y=x(u).domain([0,1]).range(["#2E2F48","#F8553D"]);const V=`O-${Math.random().toString(16).slice(2)}`;let S=$().size([N-f-d,r-m-v]).radius(i=>6).padding(se)(ee({children:b}).sum(i=>h[i])),C=S.leaves();console.log(C);let E=C.sort(function(i,R){return i.x-R.x});E[0].value=1,console.log(E[0].value);for(let i=0;i<n.length;i++)E[i].value=1,E[i].data=S.leaves()[l.length-i-1].data,E[i].x=E[i].x-10;for(let i=n.length;i<l.length;i++)E[i].value=0,E[i].data=S.leaves()[0].data;console.log(E),console.log(S.leaves());const he=(i,R)=>{e(1,o=i),e(2,_={x:R.pageX,y:R.pageY})},ve=i=>{e(1,o=-1)};return s.$$set=i=>{"data_dot"in i&&e(10,l=i.data_dot)},s.$$.update=()=>{s.$$.dirty&3072&&(e(11,a=Object.values(l)),n=a.filter(i=>i.experienced_violence_yn==1)),s.$$.dirty&30721&&(a.map(i=>i),e(12,h=a.map(i=>i.experienced_violence_yn)),e(0,g=a.map(i=>i.experienced_violence_yn)),e(13,b=W(h.length).filter(i=>h[i]>=0)),e(3,I=a.map(i=>i.violence_strings)),e(14,u=b.map(i=>g[i])),e(14,u=new Z(u)),e(4,y=x(u).domain([0,1]).range(["#2E2F48","#F8553D"]))),s.$$.dirty&12288&&(S=$().size([N-f-d,r-m-v]).radius(i=>6).padding(se)(ee({children:b}).sum(i=>h[i])))},[g,o,_,I,y,E,r,f,m,V,l,a,h,b,u,he,ve]}class Se extends J{constructor(t){super(),K(this,t,Oe,Ee,Y,{data_dot:10})}}function Be(s){let t,e,l;const a=s[10].default,n=ie(a,s,s[9],null);return{c(){t=D("div"),n&&n.c(),this.h()},l(o){t=O(o,"DIV",{style:!0});var _=k(t);n&&n.l(_),_.forEach(p),this.h()},h(){c(t,"style",e="animation: "+s[1]+"; "+s[3])},m(o,_){B(o,t,_),n&&n.m(t,null),l=!0},p(o,_){n&&n.p&&(!l||_&512)&&ae(n,a,o,o[9],l?ce(a,o[9],_,null):re(o[9]),null),(!l||_&10&&e!==(e="animation: "+o[1]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(j(n,o),l=!0)},o(o){P(n,o),l=!1},d(o){o&&p(t),n&&n.d(o)}}}function Ve(s){let t,e,l;const a=s[10].default,n=ie(a,s,s[9],null);return{c(){t=D("div"),n&&n.c(),this.h()},l(o){t=O(o,"DIV",{style:!0});var _=k(t);n&&n.l(_),_.forEach(p),this.h()},h(){c(t,"style",e="animation: "+s[0]+"; "+s[3])},m(o,_){B(o,t,_),n&&n.m(t,null),l=!0},p(o,_){n&&n.p&&(!l||_&512)&&ae(n,a,o,o[9],l?ce(a,o[9],_,null):re(o[9]),null),(!l||_&9&&e!==(e="animation: "+o[0]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(j(n,o),l=!0)},o(o){P(n,o),l=!1},d(o){o&&p(t),n&&n.d(o)}}}function Me(s){let t,e,l,a;const n=[Ve,Be],o=[];function _(r,f){return r[4]?0:1}return e=_(s),l=o[e]=n[e](s),{c(){t=D("div"),l.c(),this.h()},l(r){t=O(r,"DIV",{id:!0,style:!0});var f=k(t);l.l(f),f.forEach(p),this.h()},h(){c(t,"id",s[5]),c(t,"style",s[2])},m(r,f){B(r,t,f),o[e].m(t,null),a=!0},p(r,[f]){let d=e;e=_(r),e===d?o[e].p(r,f):(ye(),P(o[d],1,1,()=>{o[d]=null}),be(),l=o[e],l?l.p(r,f):(l=o[e]=n[e](r),l.c()),j(l,1),l.m(t,null)),(!a||f&4)&&c(t,"style",r[2])},i(r){a||(j(l),a=!0)},o(r){P(l),a=!1},d(r){r&&p(t),o[e].d()}}}function Fe(s,t,e){let{$$slots:l={},$$scope:a}=t,{animation:n="none"}=t,{animation_out:o="none; opacity: 0"}=t,{once:_=!1}=t,{top:r=0}=t,{bottom:f=0}=t,{css_observer:d=""}=t,{css_animation:m=""}=t;const v=we();let h=!0;const g=`__saos-${Math.random()}__`;function b(u){const y=`${-f}px 0px ${-r}px 0px`,V=new IntersectionObserver(S=>{e(4,h=S[0].isIntersecting),h&&_&&V.unobserve(u)},{rootMargin:y});return V.observe(u),()=>V.unobserve(u)}function I(u){const y=u.getBoundingClientRect();return e(4,h=y.top+r<window.innerHeight&&y.bottom-f>0),h&&_&&window.removeEventListener("scroll",verify),window.addEventListener("scroll",I),()=>window.removeEventListener("scroll",I)}return ke(()=>{const u=document.getElementById(g);return IntersectionObserver?b(u):I(u)}),s.$$set=u=>{"animation"in u&&e(0,n=u.animation),"animation_out"in u&&e(1,o=u.animation_out),"once"in u&&e(6,_=u.once),"top"in u&&e(7,r=u.top),"bottom"in u&&e(8,f=u.bottom),"css_observer"in u&&e(2,d=u.css_observer),"css_animation"in u&&e(3,m=u.css_animation),"$$scope"in u&&e(9,a=u.$$scope)},s.$$.update=()=>{s.$$.dirty&16&&v("update",{observing:h})},[n,o,d,m,h,g,_,r,f,a,l]}class ze extends J{constructor(t){super(),K(this,t,Fe,Me,Y,{animation:0,animation_out:1,once:6,top:7,bottom:8,css_observer:2,css_animation:3})}}function Ae(s){let t,e;return t=new Se({props:{data_dot:G}}),{c(){ue(t.$$.fragment)},l(l){_e(t.$$.fragment,l)},m(l,a){fe(t,l,a),e=!0},p:X,i(l){e||(j(t.$$.fragment,l),e=!0)},o(l){P(t.$$.fragment,l),e=!1},d(l){de(t,l)}}}function Le(s){let t,e,l,a,n,o,_,r,f,d,m,v;return m=new ze({props:{animation:"from-left 2s cubic-bezier(0.35, 0.5, 0.65, 0.95) both",$$slots:{default:[Ae]},$$scope:{ctx:s}}}),{c(){t=D("main"),e=D("h3"),l=A("Migrants reporting violence"),a=H(),n=D("div"),o=D("section"),_=D("p"),r=A("Rate of reported violence: "),f=A(s[0]),d=H(),ue(m.$$.fragment),this.h()},l(h){t=O(h,"MAIN",{class:!0});var g=k(t);e=O(g,"H3",{style:!0,class:!0});var b=k(e);l=L(b,"Migrants reporting violence"),b.forEach(p),a=q(g),n=O(g,"DIV",{class:!0});var I=k(n);o=O(I,"SECTION",{class:!0});var u=k(o);_=O(u,"P",{class:!0});var y=k(_);r=L(y,"Rate of reported violence: "),f=L(y,s[0]),y.forEach(p),d=q(u),_e(m.$$.fragment,u),u.forEach(p),I.forEach(p),g.forEach(p),this.h()},h(){z(e,"margin-top","10px"),z(e,"color","#F8553D"),c(e,"class","svelte-ynkphy"),c(_,"class","svelte-ynkphy"),c(o,"class","humans svelte-ynkphy"),c(n,"class","violence_grid svelte-ynkphy"),c(t,"class","svelte-ynkphy")},m(h,g){B(h,t,g),w(t,e),w(e,l),w(t,a),w(t,n),w(n,o),w(o,_),w(_,r),w(_,f),w(o,d),fe(m,o,null),v=!0},p(h,[g]){const b={};g&16&&(b.$$scope={dirty:g,ctx:h}),m.$set(b)},i(h){v||(j(m.$$.fragment,h),v=!0)},o(h){P(m.$$.fragment,h),v=!1},d(h){h&&p(t),de(m)}}}function Pe(s){let t=G.filter(n=>n.experienced_violence_yn==1),e=G.filter(n=>n.experienced_violence_yn==0),l=Object.keys(t).length/(Object.keys(t).length+Object.keys(e).length);return[Number(l).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class Re extends J{constructor(t){super(),K(this,t,Pe,Le,Y,{})}}export{Re as A,ze as S,Se as a};
