import{S as J,i as K,s as X,k as O,J as M,a as T,l as S,m as E,K as j,h as p,c as q,n as c,L as Q,p as P,b as F,G as b,H as Y,M as me,N as U,O as pe,q as z,r as A,u as ge,v as ye,d as L,f as be,g as C,Y as we,o as ke,C as ie,D as ae,E as re,F as ce,y as ue,z as _e,A as fe,B as de}from"./index.6c8fca2d.js";import"./transform.90f3feb5.js";import{r as W,I as Z,o as x,p as $,h as ee,a as G}from"./all_violence_data.80932636.js";function te(n,t,e){const l=n.slice();return l[23]=t[e],l[25]=e,l}function le(n){let t,e,l,i,s,o,_,u,f,d,h,v,m,y,w;function k(...a){return n[15](n[23],...a)}return{c(){t=M("g"),e=M("svg"),l=M("svg"),i=M("g"),s=M("path"),f=M("clipPath"),d=M("circle"),this.h()},l(a){t=j(a,"g",{class:!0,transform:!0});var g=E(t);e=j(g,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var B=E(e);l=j(B,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var I=E(l);i=j(I,"g",{"ns:extraneous":!0,class:!0});var V=E(i);s=j(V,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),E(s).forEach(p),V.forEach(p),I.forEach(p),B.forEach(p),f=j(g,"clipPath",{id:!0});var D=E(f);d=j(D,"circle",{r:!0}),E(d).forEach(p),D.forEach(p),g.forEach(p),this.h()},h(){c(s,"stroke-width","1.25"),c(s,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),c(s,"fill",o=n[0]?n[4](n[23].value):oe),c(s,"fill-opacity",De),c(i,"ns:extraneous","self"),c(i,"class","svelte-47u41w"),c(l,"xmlns","http://www.w3.org/2000/svg"),c(l,"xml:space","preserve"),c(l,"height","132.24px"),c(l,"width","124.19px"),c(l,"version","1.1"),c(l,"x","0px"),c(l,"y","0px"),c(l,"xmlns:ns","&#38;ns_ai;"),c(l,"enable-background","new 0 0 124.189 132.243"),c(l,"viewBox","75 0 44.189 132.243"),c(e,"class","person"),c(e,"height",_=2*n[23].r),c(e,"width",u=2*n[23].r),c(e,"viewBox","0 0 100 120"),c(d,"r",h=n[23].r),c(f,"id",v=`${n[9]}-clip-${n[23].data}`),c(t,"class","node svelte-47u41w"),c(t,"transform",m="translate("+n[23].x+","+n[23].y+")")},m(a,g){F(a,t,g),b(t,e),b(e,l),b(l,i),b(i,s),b(t,f),b(f,d),y||(w=[U(e,"mouseover",k),U(e,"mouseout",n[16])],y=!0)},p(a,g){n=a,g&49&&o!==(o=n[0]?n[4](n[23].value):oe)&&c(s,"fill",o),g&32&&_!==(_=2*n[23].r)&&c(e,"height",_),g&32&&u!==(u=2*n[23].r)&&c(e,"width",u),g&32&&h!==(h=n[23].r)&&c(d,"r",h),g&32&&v!==(v=`${n[9]}-clip-${n[23].data}`)&&c(f,"id",v),g&32&&m!==(m="translate("+n[23].x+","+n[23].y+")")&&c(t,"transform",m)},d(a){a&&p(t),y=!1,pe(w)}}}function ne(n){let t,e=n[3][n[1].data].join(", ")+"",l;return{c(){t=z("Type of violence reported: "),l=z(e)},l(i){t=A(i,"Type of violence reported: "),l=A(i,e)},m(i,s){F(i,t,s),F(i,l,s)},p(i,s){s&10&&e!==(e=i[3][i[1].data].join(", ")+"")&&ge(l,e)},d(i){i&&p(t),i&&p(l)}}}function Ee(n){let t,e,l,i,s,o,_=n[5],u=[];for(let d=0;d<_.length;d+=1)u[d]=le(te(n,_,d));let f=n[1]!==-1&&ne(n);return{c(){t=O("main"),e=O("div"),l=M("svg");for(let d=0;d<u.length;d+=1)u[d].c();i=T(),s=O("div"),f&&f.c(),this.h()},l(d){t=S(d,"MAIN",{class:!0});var h=E(t);e=S(h,"DIV",{class:!0});var v=E(e);l=j(v,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var m=E(l);for(let w=0;w<u.length;w+=1)u[w].l(m);m.forEach(p),i=q(v),s=S(v,"DIV",{class:!0,style:!0});var y=E(s);f&&f.l(y),y.forEach(p),v.forEach(p),h.forEach(p),this.h()},h(){c(l,"width",H),c(l,"height",n[6]),c(l,"viewBox",-n[7]+" "+-n[8]+" "+H+" "+n[6]),c(l,"fill",Ie),c(l,"class","person"),c(s,"class",o=Q(n[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w"),P(s,"left",n[2].x-200+"px"),P(s,"top",n[2].y-1500+"px"),c(e,"class","violence_grid svelte-47u41w"),c(t,"class","circles svelte-47u41w")},m(d,h){F(d,t,h),b(t,e),b(e,l);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(l,null);b(e,i),b(e,s),f&&f.m(s,null)},p(d,[h]){if(h&567){_=d[5];let v;for(v=0;v<_.length;v+=1){const m=te(d,_,v);u[v]?u[v].p(m,h):(u[v]=le(m),u[v].c(),u[v].m(l,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=_.length}d[1]!==-1?f?f.p(d,h):(f=ne(d),f.c(),f.m(s,null)):f&&(f.d(1),f=null),h&2&&o!==(o=Q(d[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w")&&c(s,"class",o),h&4&&P(s,"left",d[2].x-200+"px"),h&4&&P(s,"top",d[2].y-1500+"px")},i:Y,o:Y,d(d){d&&p(t),me(u,d),f&&f.d()}}}const H=800,se=3,R=1,Ie="black",oe="#ccc",De=.9;function Oe(n,t,e){let{data_dot:l=[]}=t,i=Object.values(l),s=i.filter(r=>r.experienced_violence_yn==1),o=-1,_={x:0,y:0};const u=H,f=R,d=R,h=R,v=R;i.map(r=>r);let m=i.map(r=>r.experienced_violence_yn),y=i.map(r=>r.experienced_violence_yn),w=W(m.length).filter(r=>m[r]>=0),k=i.map(r=>r.violence_strings),a=w.map(r=>y[r]);a=new Z(a);let g=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]);const B=`O-${Math.random().toString(16).slice(2)}`;let I=$().size([H-f-d,u-h-v]).radius(r=>9).padding(se)(ee({children:w}).sum(r=>m[r])),V=I.leaves();console.log(V);let D=V.sort(function(r,N){return r.x-N.x});D[0].value=1,console.log(D[0].value);for(let r=0;r<s.length;r++)D[r].value=1,D[r].data=I.leaves()[l.length-r-1].data,D[r].x=D[r].x-10;for(let r=s.length;r<l.length;r++)D[r].value=0,D[r].data=I.leaves()[0].data;console.log(D),console.log(I.leaves());const ve=(r,N)=>{e(1,o=r),e(2,_={x:N.pageX,y:N.pageY})},he=r=>{e(1,o=-1)};return n.$$set=r=>{"data_dot"in r&&e(10,l=r.data_dot)},n.$$.update=()=>{n.$$.dirty&3072&&(e(11,i=Object.values(l)),s=i.filter(r=>r.experienced_violence_yn==1)),n.$$.dirty&30721&&(i.map(r=>r),e(12,m=i.map(r=>r.experienced_violence_yn)),e(0,y=i.map(r=>r.experienced_violence_yn)),e(13,w=W(m.length).filter(r=>m[r]>=0)),e(3,k=i.map(r=>r.violence_strings)),e(14,a=w.map(r=>y[r])),e(14,a=new Z(a)),e(4,g=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]))),n.$$.dirty&12288&&(I=$().size([H-f-d,u-h-v]).radius(r=>6).padding(se)(ee({children:w}).sum(r=>m[r])))},[y,o,_,k,g,D,u,f,h,B,l,i,m,w,a,ve,he]}class Se extends J{constructor(t){super(),K(this,t,Oe,Ee,X,{data_dot:10})}}function Be(n){let t,e,l;const i=n[10].default,s=ie(i,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(o){t=S(o,"DIV",{style:!0});var _=E(t);s&&s.l(_),_.forEach(p),this.h()},h(){c(t,"style",e="animation: "+n[1]+"; "+n[3])},m(o,_){F(o,t,_),s&&s.m(t,null),l=!0},p(o,_){s&&s.p&&(!l||_&512)&&ae(s,i,o,o[9],l?ce(i,o[9],_,null):re(o[9]),null),(!l||_&10&&e!==(e="animation: "+o[1]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(C(s,o),l=!0)},o(o){L(s,o),l=!1},d(o){o&&p(t),s&&s.d(o)}}}function Ve(n){let t,e,l;const i=n[10].default,s=ie(i,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(o){t=S(o,"DIV",{style:!0});var _=E(t);s&&s.l(_),_.forEach(p),this.h()},h(){c(t,"style",e="animation: "+n[0]+"; "+n[3])},m(o,_){F(o,t,_),s&&s.m(t,null),l=!0},p(o,_){s&&s.p&&(!l||_&512)&&ae(s,i,o,o[9],l?ce(i,o[9],_,null):re(o[9]),null),(!l||_&9&&e!==(e="animation: "+o[0]+"; "+o[3]))&&c(t,"style",e)},i(o){l||(C(s,o),l=!0)},o(o){L(s,o),l=!1},d(o){o&&p(t),s&&s.d(o)}}}function Me(n){let t,e,l,i;const s=[Ve,Be],o=[];function _(u,f){return u[4]?0:1}return e=_(n),l=o[e]=s[e](n),{c(){t=O("div"),l.c(),this.h()},l(u){t=S(u,"DIV",{id:!0,style:!0});var f=E(t);l.l(f),f.forEach(p),this.h()},h(){c(t,"id",n[5]),c(t,"style",n[2])},m(u,f){F(u,t,f),o[e].m(t,null),i=!0},p(u,[f]){let d=e;e=_(u),e===d?o[e].p(u,f):(ye(),L(o[d],1,1,()=>{o[d]=null}),be(),l=o[e],l?l.p(u,f):(l=o[e]=s[e](u),l.c()),C(l,1),l.m(t,null)),(!i||f&4)&&c(t,"style",u[2])},i(u){i||(C(l),i=!0)},o(u){L(l),i=!1},d(u){u&&p(t),o[e].d()}}}function je(n,t,e){let{$$slots:l={},$$scope:i}=t,{animation:s="none"}=t,{animation_out:o="none; opacity: 0"}=t,{once:_=!1}=t,{top:u=0}=t,{bottom:f=0}=t,{css_observer:d=""}=t,{css_animation:h=""}=t;const v=we();let m=!0;const y=`__saos-${Math.random()}__`;function w(a){const g=`${-f}px 0px ${-u}px 0px`,B=new IntersectionObserver(I=>{e(4,m=I[0].isIntersecting),m&&_&&B.unobserve(a)},{rootMargin:g});return B.observe(a),()=>B.unobserve(a)}function k(a){const g=a.getBoundingClientRect();return e(4,m=g.top+u<window.innerHeight&&g.bottom-f>0),m&&_&&window.removeEventListener("scroll",verify),window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)}return ke(()=>{const a=document.getElementById(y);return IntersectionObserver?w(a):k(a)}),n.$$set=a=>{"animation"in a&&e(0,s=a.animation),"animation_out"in a&&e(1,o=a.animation_out),"once"in a&&e(6,_=a.once),"top"in a&&e(7,u=a.top),"bottom"in a&&e(8,f=a.bottom),"css_observer"in a&&e(2,d=a.css_observer),"css_animation"in a&&e(3,h=a.css_animation),"$$scope"in a&&e(9,i=a.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&v("update",{observing:m})},[s,o,d,h,m,y,_,u,f,i,l]}class Fe extends J{constructor(t){super(),K(this,t,je,Me,X,{animation:0,animation_out:1,once:6,top:7,bottom:8,css_observer:2,css_animation:3})}}function Pe(n){let t,e;return t=new Se({props:{data_dot:G}}),{c(){ue(t.$$.fragment)},l(l){_e(t.$$.fragment,l)},m(l,i){fe(t,l,i),e=!0},p:Y,i(l){e||(C(t.$$.fragment,l),e=!0)},o(l){L(t.$$.fragment,l),e=!1},d(l){de(t,l)}}}function ze(n){let t,e,l,i,s,o,_,u,f,d,h,v,m,y,w;return y=new Fe({props:{animation:"from-left 2s cubic-bezier(0.35, 0.5, 0.65, 0.95) both",$$slots:{default:[Pe]},$$scope:{ctx:n}}}),{c(){t=O("main"),e=O("h3"),l=z("Migrants reporting violence"),i=T(),s=O("div"),o=O("section"),_=O("p"),u=z("Rate of reported violence: "),f=z(n[0]),d=T(),h=O("p"),v=z("Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),m=T(),ue(y.$$.fragment),this.h()},l(k){t=S(k,"MAIN",{class:!0});var a=E(t);e=S(a,"H3",{style:!0,class:!0});var g=E(e);l=A(g,"Migrants reporting violence"),g.forEach(p),i=q(a),s=S(a,"DIV",{class:!0});var B=E(s);o=S(B,"SECTION",{class:!0});var I=E(o);_=S(I,"P",{class:!0});var V=E(_);u=A(V,"Rate of reported violence: "),f=A(V,n[0]),V.forEach(p),d=q(I),h=S(I,"P",{style:!0,class:!0});var D=E(h);v=A(D,"Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),D.forEach(p),m=q(I),_e(y.$$.fragment,I),I.forEach(p),B.forEach(p),a.forEach(p),this.h()},h(){P(e,"margin-top","10px"),P(e,"color","#F8553D"),c(e,"class","svelte-ynkphy"),c(_,"class","svelte-ynkphy"),P(h,"font-style","italic"),c(h,"class","svelte-ynkphy"),c(o,"class","humans svelte-ynkphy"),c(s,"class","violence_grid svelte-ynkphy"),c(t,"class","svelte-ynkphy")},m(k,a){F(k,t,a),b(t,e),b(e,l),b(t,i),b(t,s),b(s,o),b(o,_),b(_,u),b(_,f),b(o,d),b(o,h),b(h,v),b(o,m),fe(y,o,null),w=!0},p(k,[a]){const g={};a&16&&(g.$$scope={dirty:a,ctx:k}),y.$set(g)},i(k){w||(C(y.$$.fragment,k),w=!0)},o(k){L(y.$$.fragment,k),w=!1},d(k){k&&p(t),de(y)}}}function Ae(n){let t=G.filter(s=>s.experienced_violence_yn==1),e=G.filter(s=>s.experienced_violence_yn==0),l=Object.keys(t).length/(Object.keys(t).length+Object.keys(e).length);return[Number(l).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class Ne extends J{constructor(t){super(),K(this,t,Ae,ze,X,{})}}export{Ne as A,Fe as S};
