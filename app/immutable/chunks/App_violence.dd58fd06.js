import{S as J,i as K,s as X,k as O,J as q,a as L,l as S,m as k,K as j,h as g,c as C,n as c,L as Q,p as F,b as M,G as w,H as Y,M as pe,N as U,O as ge,q as N,r as P,u as ye,v as be,d as z,f as we,g as A,Y as Ee,o as ke,C as ae,D as re,E as ce,F as ue,y as fe,z as _e,A as de,B as ve}from"./index.6c8fca2d.js";import"./transform.90f3feb5.js";import{r as W,I as Z,o as x,p as $,h as ee,a as G}from"./all_violence_data.642793a1.js";function te(n,t,e){const l=n.slice();return l[23]=t[e],l[25]=e,l}function le(n){let t,e,l,o,s,i,f,v,u,h,p,d,m,_,E;function b(...a){return n[15](n[23],...a)}return{c(){t=q("g"),e=q("svg"),l=q("svg"),o=q("g"),s=q("path"),u=q("clipPath"),h=q("circle"),this.h()},l(a){t=j(a,"g",{class:!0,transform:!0});var y=k(t);e=j(y,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var B=k(e);l=j(B,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var I=k(l);o=j(I,"g",{"ns:extraneous":!0,class:!0});var V=k(o);s=j(V,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),k(s).forEach(g),V.forEach(g),I.forEach(g),B.forEach(g),u=j(y,"clipPath",{id:!0});var D=k(u);h=j(D,"circle",{r:!0}),k(h).forEach(g),D.forEach(g),y.forEach(g),this.h()},h(){c(s,"stroke-width","1.25"),c(s,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),c(s,"fill",i=n[0]?n[4](n[23].value):oe),c(s,"fill-opacity",Oe),c(o,"ns:extraneous","self"),c(o,"class","svelte-13lnq1x"),c(l,"xmlns","http://www.w3.org/2000/svg"),c(l,"xml:space","preserve"),c(l,"height","132.24px"),c(l,"width","124.19px"),c(l,"version","1.1"),c(l,"x","0px"),c(l,"y","0px"),c(l,"xmlns:ns","&#38;ns_ai;"),c(l,"enable-background","new 0 0 124.189 132.243"),c(l,"viewBox","75 0 44.189 132.243"),c(e,"class","person"),c(e,"height",f=2*n[23].r),c(e,"width",v=2*n[23].r),c(e,"viewBox","0 0 100 120"),c(h,"r",p=n[23].r),c(u,"id",d=`${n[9]}-clip-${n[23].data}`),c(t,"class","node svelte-13lnq1x"),c(t,"transform",m="translate("+n[23].x+","+n[23].y+")")},m(a,y){M(a,t,y),w(t,e),w(e,l),w(l,o),w(o,s),w(t,u),w(u,h),_||(E=[U(e,"mouseover",b),U(e,"mouseout",n[16])],_=!0)},p(a,y){n=a,y&49&&i!==(i=n[0]?n[4](n[23].value):oe)&&c(s,"fill",i),y&32&&f!==(f=2*n[23].r)&&c(e,"height",f),y&32&&v!==(v=2*n[23].r)&&c(e,"width",v),y&32&&p!==(p=n[23].r)&&c(h,"r",p),y&32&&d!==(d=`${n[9]}-clip-${n[23].data}`)&&c(u,"id",d),y&32&&m!==(m="translate("+n[23].x+","+n[23].y+")")&&c(t,"transform",m)},d(a){a&&g(t),_=!1,ge(E)}}}function ne(n){let t,e=n[3][n[1].data].join(", ")+"",l;return{c(){t=N("Type of violence reported: "),l=N(e)},l(o){t=P(o,"Type of violence reported: "),l=P(o,e)},m(o,s){M(o,t,s),M(o,l,s)},p(o,s){s&10&&e!==(e=o[3][o[1].data].join(", ")+"")&&ye(l,e)},d(o){o&&g(t),o&&g(l)}}}function se(n){let t;return{c(){t=N("No violence reported.")},l(e){t=P(e,"No violence reported.")},m(e,l){M(e,t,l)},d(e){e&&g(t)}}}function Ie(n){let t,e,l,o,s,i,f,v=n[5],u=[];for(let d=0;d<v.length;d+=1)u[d]=le(te(n,v,d));let h=n[1]!==-1&&n[1].value==1&&ne(n),p=n[1]!==-1&&n[1].value==0&&se();return{c(){t=O("main"),e=O("div"),l=q("svg");for(let d=0;d<u.length;d+=1)u[d].c();o=L(),s=O("div"),h&&h.c(),i=L(),p&&p.c(),this.h()},l(d){t=S(d,"MAIN",{class:!0});var m=k(t);e=S(m,"DIV",{class:!0});var _=k(e);l=j(_,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var E=k(l);for(let a=0;a<u.length;a+=1)u[a].l(E);E.forEach(g),o=C(_),s=S(_,"DIV",{class:!0,style:!0});var b=k(s);h&&h.l(b),i=C(b),p&&p.l(b),b.forEach(g),_.forEach(g),m.forEach(g),this.h()},h(){c(l,"width",H),c(l,"height",n[6]),c(l,"viewBox",-n[7]+" "+-n[8]+" "+H+" "+n[6]),c(l,"fill",De),c(l,"class","person"),c(s,"class",f=Q(n[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-13lnq1x"),F(s,"left",n[2].x-100+"px"),F(s,"top",n[2].y-2600+"px"),c(e,"class","violence_grid svelte-13lnq1x"),c(t,"class","circles svelte-13lnq1x")},m(d,m){M(d,t,m),w(t,e),w(e,l);for(let _=0;_<u.length;_+=1)u[_]&&u[_].m(l,null);w(e,o),w(e,s),h&&h.m(s,null),w(s,i),p&&p.m(s,null)},p(d,[m]){if(m&567){v=d[5];let _;for(_=0;_<v.length;_+=1){const E=te(d,v,_);u[_]?u[_].p(E,m):(u[_]=le(E),u[_].c(),u[_].m(l,null))}for(;_<u.length;_+=1)u[_].d(1);u.length=v.length}d[1]!==-1&&d[1].value==1?h?h.p(d,m):(h=ne(d),h.c(),h.m(s,i)):h&&(h.d(1),h=null),d[1]!==-1&&d[1].value==0?p||(p=se(),p.c(),p.m(s,null)):p&&(p.d(1),p=null),m&2&&f!==(f=Q(d[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-13lnq1x")&&c(s,"class",f),m&4&&F(s,"left",d[2].x-100+"px"),m&4&&F(s,"top",d[2].y-2600+"px")},i:Y,o:Y,d(d){d&&g(t),pe(u,d),h&&h.d(),p&&p.d()}}}const H=700,ie=3,T=1,De="black",oe="#ccc",Oe=.9;function Se(n,t,e){let{data_dot:l=[]}=t,o=Object.values(l),s=o.filter(r=>r.experienced_violence_yn==1),i=-1,f={x:0,y:0};const v=H,u=T,h=T,p=T,d=T;o.map(r=>r);let m=o.map(r=>r.experienced_violence_yn),_=o.map(r=>r.experienced_violence_yn),E=W(m.length).filter(r=>m[r]>=0),b=o.map(r=>r.violence_strings),a=E.map(r=>_[r]);a=new Z(a);let y=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]);const B=`O-${Math.random().toString(16).slice(2)}`;let I=$().size([H-u-h,v-p-d]).radius(r=>7).padding(ie)(ee({children:E}).sum(r=>m[r])),V=I.leaves();console.log(V);let D=V.sort(function(r,R){return r.x-R.x});D[0].value=1,console.log(D[0].value);for(let r=0;r<s.length;r++)D[r].value=1,D[r].data=I.leaves()[l.length-r-1].data,D[r].x=D[r].x-10;for(let r=s.length;r<l.length;r++)D[r].value=0,D[r].data=I.leaves()[0].data;console.log(D),console.log(I.leaves());const he=(r,R)=>{e(1,i=r),e(2,f={x:R.pageX,y:R.pageY})},me=r=>{e(1,i=-1)};return n.$$set=r=>{"data_dot"in r&&e(10,l=r.data_dot)},n.$$.update=()=>{n.$$.dirty&3072&&(e(11,o=Object.values(l)),s=o.filter(r=>r.experienced_violence_yn==1)),n.$$.dirty&30721&&(o.map(r=>r),e(12,m=o.map(r=>r.experienced_violence_yn)),e(0,_=o.map(r=>r.experienced_violence_yn)),e(13,E=W(m.length).filter(r=>m[r]>=0)),e(3,b=o.map(r=>r.violence_strings)),e(14,a=E.map(r=>_[r])),e(14,a=new Z(a)),e(4,y=x(a).domain([0,1]).range(["#2E2F48","#F8553D"]))),n.$$.dirty&12288&&(I=$().size([H-u-h,v-p-d]).radius(r=>6).padding(ie)(ee({children:E}).sum(r=>m[r])))},[_,i,f,b,y,D,v,u,p,B,l,o,m,E,a,he,me]}class Be extends J{constructor(t){super(),K(this,t,Se,Ie,X,{data_dot:10})}}function Ve(n){let t,e,l;const o=n[10].default,s=ae(o,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(i){t=S(i,"DIV",{style:!0});var f=k(t);s&&s.l(f),f.forEach(g),this.h()},h(){c(t,"style",e="animation: "+n[1]+"; "+n[3])},m(i,f){M(i,t,f),s&&s.m(t,null),l=!0},p(i,f){s&&s.p&&(!l||f&512)&&re(s,o,i,i[9],l?ue(o,i[9],f,null):ce(i[9]),null),(!l||f&10&&e!==(e="animation: "+i[1]+"; "+i[3]))&&c(t,"style",e)},i(i){l||(A(s,i),l=!0)},o(i){z(s,i),l=!1},d(i){i&&g(t),s&&s.d(i)}}}function Me(n){let t,e,l;const o=n[10].default,s=ae(o,n,n[9],null);return{c(){t=O("div"),s&&s.c(),this.h()},l(i){t=S(i,"DIV",{style:!0});var f=k(t);s&&s.l(f),f.forEach(g),this.h()},h(){c(t,"style",e="animation: "+n[0]+"; "+n[3])},m(i,f){M(i,t,f),s&&s.m(t,null),l=!0},p(i,f){s&&s.p&&(!l||f&512)&&re(s,o,i,i[9],l?ue(o,i[9],f,null):ce(i[9]),null),(!l||f&9&&e!==(e="animation: "+i[0]+"; "+i[3]))&&c(t,"style",e)},i(i){l||(A(s,i),l=!0)},o(i){z(s,i),l=!1},d(i){i&&g(t),s&&s.d(i)}}}function qe(n){let t,e,l,o;const s=[Me,Ve],i=[];function f(v,u){return v[4]?0:1}return e=f(n),l=i[e]=s[e](n),{c(){t=O("div"),l.c(),this.h()},l(v){t=S(v,"DIV",{id:!0,style:!0});var u=k(t);l.l(u),u.forEach(g),this.h()},h(){c(t,"id",n[5]),c(t,"style",n[2])},m(v,u){M(v,t,u),i[e].m(t,null),o=!0},p(v,[u]){let h=e;e=f(v),e===h?i[e].p(v,u):(be(),z(i[h],1,1,()=>{i[h]=null}),we(),l=i[e],l?l.p(v,u):(l=i[e]=s[e](v),l.c()),A(l,1),l.m(t,null)),(!o||u&4)&&c(t,"style",v[2])},i(v){o||(A(l),o=!0)},o(v){z(l),o=!1},d(v){v&&g(t),i[e].d()}}}function je(n,t,e){let{$$slots:l={},$$scope:o}=t,{animation:s="none"}=t,{animation_out:i="none; opacity: 0"}=t,{once:f=!1}=t,{top:v=0}=t,{bottom:u=0}=t,{css_observer:h=""}=t,{css_animation:p=""}=t;const d=Ee();let m=!0;const _=`__saos-${Math.random()}__`;function E(a){const y=`${-u}px 0px ${-v}px 0px`,B=new IntersectionObserver(I=>{e(4,m=I[0].isIntersecting),m&&f&&B.unobserve(a)},{rootMargin:y});return B.observe(a),()=>B.unobserve(a)}function b(a){const y=a.getBoundingClientRect();return e(4,m=y.top+v<window.innerHeight&&y.bottom-u>0),m&&f&&window.removeEventListener("scroll",verify),window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)}return ke(()=>{const a=document.getElementById(_);return IntersectionObserver?E(a):b(a)}),n.$$set=a=>{"animation"in a&&e(0,s=a.animation),"animation_out"in a&&e(1,i=a.animation_out),"once"in a&&e(6,f=a.once),"top"in a&&e(7,v=a.top),"bottom"in a&&e(8,u=a.bottom),"css_observer"in a&&e(2,h=a.css_observer),"css_animation"in a&&e(3,p=a.css_animation),"$$scope"in a&&e(9,o=a.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&d("update",{observing:m})},[s,i,h,p,m,_,f,v,u,o,l]}class Fe extends J{constructor(t){super(),K(this,t,je,qe,X,{animation:0,animation_out:1,once:6,top:7,bottom:8,css_observer:2,css_animation:3})}}function Ne(n){let t,e;return t=new Be({props:{data_dot:G}}),{c(){fe(t.$$.fragment)},l(l){_e(t.$$.fragment,l)},m(l,o){de(t,l,o),e=!0},p:Y,i(l){e||(A(t.$$.fragment,l),e=!0)},o(l){z(t.$$.fragment,l),e=!1},d(l){ve(t,l)}}}function Pe(n){let t,e,l,o,s,i,f,v,u,h,p,d,m,_,E;return _=new Fe({props:{animation:"scale-in-center 0.5s cubic-bezier(0.250, 0.460, 0.450, 0.940) both",$$slots:{default:[Ne]},$$scope:{ctx:n}}}),{c(){t=O("main"),e=O("h3"),l=N("Migrants reporting violence"),o=L(),s=O("div"),i=O("section"),f=O("p"),v=N("Rate of reported violence: "),u=N(n[0]),h=L(),p=O("p"),d=N("Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),m=L(),fe(_.$$.fragment),this.h()},l(b){t=S(b,"MAIN",{class:!0});var a=k(t);e=S(a,"H3",{style:!0,class:!0});var y=k(e);l=P(y,"Migrants reporting violence"),y.forEach(g),o=C(a),s=S(a,"DIV",{class:!0});var B=k(s);i=S(B,"SECTION",{class:!0});var I=k(i);f=S(I,"P",{class:!0});var V=k(f);v=P(V,"Rate of reported violence: "),u=P(V,n[0]),V.forEach(g),h=C(I),p=S(I,"P",{style:!0,class:!0});var D=k(p);d=P(D,"Hover over icons to see more detail on the types of violence individuals in this dataset experienced."),D.forEach(g),m=C(I),_e(_.$$.fragment,I),I.forEach(g),B.forEach(g),a.forEach(g),this.h()},h(){F(e,"margin-top","10px"),F(e,"color","#F8553D"),c(e,"class","svelte-1nsa0mw"),c(f,"class","svelte-1nsa0mw"),F(p,"font-style","italic"),c(p,"class","svelte-1nsa0mw"),c(i,"class","humans svelte-1nsa0mw"),c(s,"class","violence_grid svelte-1nsa0mw"),c(t,"class","svelte-1nsa0mw")},m(b,a){M(b,t,a),w(t,e),w(e,l),w(t,o),w(t,s),w(s,i),w(i,f),w(f,v),w(f,u),w(i,h),w(i,p),w(p,d),w(i,m),de(_,i,null),E=!0},p(b,[a]){const y={};a&16&&(y.$$scope={dirty:a,ctx:b}),_.$set(y)},i(b){E||(A(_.$$.fragment,b),E=!0)},o(b){z(_.$$.fragment,b),E=!1},d(b){b&&g(t),ve(_)}}}function ze(n){let t=G.filter(s=>s.experienced_violence_yn==1),e=G.filter(s=>s.experienced_violence_yn==0),l=Object.keys(t).length/(Object.keys(t).length+Object.keys(e).length);return[Number(l).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class He extends J{constructor(t){super(),K(this,t,ze,Pe,X,{})}}export{He as A,Fe as S};
