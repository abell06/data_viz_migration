import{S as te,i as le,s as se,k as B,J as x,a as C,l as I,m as E,K as O,h as g,c as L,n as r,L as H,p as V,b as A,G as y,H as R,M as re,N as G,O as ie,q as F,r as M,u as oe,y as ce,z as ue,A as _e,g as ve,d as he,B as de}from"./index.ff3bf796.js";import"./transform.90f3feb5.js";import{r as J,I as K,o as X,p as Y,h as Q,a as q}from"./all_violence_data.2787399c.js";function U(l,n,e){const a=l.slice();return a[23]=n[e],a[25]=e,a}function W(l){let n,e,a,c,s,h,f,_,u,i,d,o,v,w,b;function D(...p){return l[15](l[23],...p)}return{c(){n=x("g"),e=x("svg"),a=x("svg"),c=x("g"),s=x("path"),u=x("clipPath"),i=x("circle"),this.h()},l(p){n=O(p,"g",{class:!0,transform:!0});var m=E(n);e=O(m,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var z=E(e);a=O(z,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var S=E(a);c=O(S,"g",{"ns:extraneous":!0,class:!0});var P=E(c);s=O(P,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),E(s).forEach(g),P.forEach(g),S.forEach(g),z.forEach(g),u=O(m,"clipPath",{id:!0});var k=E(u);i=O(k,"circle",{r:!0}),E(i).forEach(g),k.forEach(g),m.forEach(g),this.h()},h(){r(s,"stroke-width","1.25"),r(s,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),r(s,"fill",h=l[0]?l[4](l[23].value):ee),r(s,"fill-opacity",ge),r(c,"ns:extraneous","self"),r(c,"class","svelte-47u41w"),r(a,"xmlns","http://www.w3.org/2000/svg"),r(a,"xml:space","preserve"),r(a,"height","132.24px"),r(a,"width","124.19px"),r(a,"version","1.1"),r(a,"x","0px"),r(a,"y","0px"),r(a,"xmlns:ns","&#38;ns_ai;"),r(a,"enable-background","new 0 0 124.189 132.243"),r(a,"viewBox","75 0 44.189 132.243"),r(e,"class","person"),r(e,"height",f=2*l[23].r),r(e,"width",_=2*l[23].r),r(e,"viewBox","0 0 100 120"),r(i,"r",d=l[23].r),r(u,"id",o=`${l[9]}-clip-${l[23].data}`),r(n,"class","node svelte-47u41w"),r(n,"transform",v="translate("+l[23].x+","+l[23].y+")")},m(p,m){A(p,n,m),y(n,e),y(e,a),y(a,c),y(c,s),y(n,u),y(u,i),w||(b=[G(e,"mouseover",D),G(e,"mouseout",l[16])],w=!0)},p(p,m){l=p,m&49&&h!==(h=l[0]?l[4](l[23].value):ee)&&r(s,"fill",h),m&32&&f!==(f=2*l[23].r)&&r(e,"height",f),m&32&&_!==(_=2*l[23].r)&&r(e,"width",_),m&32&&d!==(d=l[23].r)&&r(i,"r",d),m&32&&o!==(o=`${l[9]}-clip-${l[23].data}`)&&r(u,"id",o),m&32&&v!==(v="translate("+l[23].x+","+l[23].y+")")&&r(n,"transform",v)},d(p){p&&g(n),w=!1,ie(b)}}}function Z(l){let n,e=l[3][l[1].data]+"",a,c;return{c(){n=F("Type of violence reported: `"),a=F(e),c=F("`")},l(s){n=M(s,"Type of violence reported: `"),a=M(s,e),c=M(s,"`")},m(s,h){A(s,n,h),A(s,a,h),A(s,c,h)},p(s,h){h&10&&e!==(e=s[3][s[1].data]+"")&&oe(a,e)},d(s){s&&g(n),s&&g(a),s&&g(c)}}}function pe(l){let n,e,a,c,s,h,f=l[5],_=[];for(let i=0;i<f.length;i+=1)_[i]=W(U(l,f,i));let u=l[1]!==-1&&Z(l);return{c(){n=B("main"),e=B("div"),a=x("svg");for(let i=0;i<_.length;i+=1)_[i].c();c=C(),s=B("div"),u&&u.c(),this.h()},l(i){n=I(i,"MAIN",{class:!0});var d=E(n);e=I(d,"DIV",{class:!0});var o=E(e);a=O(o,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var v=E(a);for(let b=0;b<_.length;b+=1)_[b].l(v);v.forEach(g),c=L(o),s=I(o,"DIV",{class:!0,style:!0});var w=E(s);u&&u.l(w),w.forEach(g),o.forEach(g),d.forEach(g),this.h()},h(){r(a,"width",j),r(a,"height",l[6]),r(a,"viewBox",-l[7]+" "+-l[8]+" "+j+" "+l[6]),r(a,"fill",fe),r(a,"class","person"),r(s,"class",h=H(l[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w"),V(s,"left",l[2].x+2+"px"),V(s,"top",l[2].y-1e3+"px"),r(e,"class","violence_grid svelte-47u41w"),r(n,"class","circles svelte-47u41w")},m(i,d){A(i,n,d),y(n,e),y(e,a);for(let o=0;o<_.length;o+=1)_[o]&&_[o].m(a,null);y(e,c),y(e,s),u&&u.m(s,null)},p(i,[d]){if(d&567){f=i[5];let o;for(o=0;o<f.length;o+=1){const v=U(i,f,o);_[o]?_[o].p(v,d):(_[o]=W(v),_[o].c(),_[o].m(a,null))}for(;o<_.length;o+=1)_[o].d(1);_.length=f.length}i[1]!==-1?u?u.p(i,d):(u=Z(i),u.c(),u.m(s,null)):u&&(u.d(1),u=null),d&2&&h!==(h=H(i[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-47u41w")&&r(s,"class",h),d&4&&V(s,"left",i[2].x+2+"px"),d&4&&V(s,"top",i[2].y-1e3+"px")},i:R,o:R,d(i){i&&g(n),re(_,i),u&&u.d()}}}const j=700,$=3,T=1,fe="black",ee="#ccc",ge=.9;function me(l,n,e){let{data_dot:a=[]}=n,c=Object.values(a),s=c.filter(t=>t.experienced_violence_yn==1),h=-1,f={x:0,y:0};const _=j,u=T,i=T,d=T,o=T;c.map(t=>t);let v=c.map(t=>t.experienced_violence_yn),w=c.map(t=>t.experienced_violence_yn),b=J(v.length).filter(t=>v[t]>=0),D=c.map(t=>t.violence_strings),p=b.map(t=>w[t]);p=new K(p);let m=X(p).domain([0,1]).range(["#2E2F48","#F8553D"]);const z=`O-${Math.random().toString(16).slice(2)}`;let S=Y().size([j-u-i,_-d-o]).radius(t=>6).padding($)(Q({children:b}).sum(t=>v[t])),P=S.leaves();console.log(P);let k=P.sort(function(t,N){return t.x-N.x});k[0].value=1,console.log(k[0].value);for(let t=0;t<s.length;t++)k[t].value=1,k[t].data=S.leaves()[a.length-t-1].data,k[t].x=k[t].x-10;for(let t=s.length;t<a.length;t++)k[t].value=0,k[t].data=S.leaves()[0].data;console.log(k),console.log(S.leaves());const ae=(t,N)=>{e(1,h=t),e(2,f={x:N.pageX,y:N.pageY})},ne=t=>{e(1,h=-1)};return l.$$set=t=>{"data_dot"in t&&e(10,a=t.data_dot)},l.$$.update=()=>{l.$$.dirty&3072&&(e(11,c=Object.values(a)),s=c.filter(t=>t.experienced_violence_yn==1)),l.$$.dirty&30721&&(c.map(t=>t),e(12,v=c.map(t=>t.experienced_violence_yn)),e(0,w=c.map(t=>t.experienced_violence_yn)),e(13,b=J(v.length).filter(t=>v[t]>=0)),e(3,D=c.map(t=>t.violence_strings)),e(14,p=b.map(t=>w[t])),e(14,p=new K(p)),e(4,m=X(p).domain([0,1]).range(["#2E2F48","#F8553D"]))),l.$$.dirty&12288&&(S=Y().size([j-u-i,_-d-o]).radius(t=>6).padding($)(Q({children:b}).sum(t=>v[t])))},[w,h,f,D,m,k,_,u,d,z,a,c,v,b,p,ae,ne]}class ye extends te{constructor(n){super(),le(this,n,me,pe,se,{data_dot:10})}}function we(l){let n,e,a,c,s,h,f,_,u,i,d,o;return d=new ye({props:{data_dot:q}}),{c(){n=B("main"),e=B("h3"),a=F("Migrants reporting violence"),c=C(),s=B("div"),h=B("section"),f=B("p"),_=F("Rate of reported violence: "),u=F(l[0]),i=C(),ce(d.$$.fragment),this.h()},l(v){n=I(v,"MAIN",{class:!0});var w=E(n);e=I(w,"H3",{style:!0,class:!0});var b=E(e);a=M(b,"Migrants reporting violence"),b.forEach(g),c=L(w),s=I(w,"DIV",{class:!0});var D=E(s);h=I(D,"SECTION",{class:!0});var p=E(h);f=I(p,"P",{class:!0});var m=E(f);_=M(m,"Rate of reported violence: "),u=M(m,l[0]),m.forEach(g),i=L(p),ue(d.$$.fragment,p),p.forEach(g),D.forEach(g),w.forEach(g),this.h()},h(){V(e,"margin-top","10px"),V(e,"color","#F8553D"),r(e,"class","svelte-oyi84i"),r(f,"class","svelte-oyi84i"),r(h,"class","humans svelte-oyi84i"),r(s,"class","violence_grid svelte-oyi84i"),r(n,"class","svelte-oyi84i")},m(v,w){A(v,n,w),y(n,e),y(e,a),y(n,c),y(n,s),y(s,h),y(h,f),y(f,_),y(f,u),y(h,i),_e(d,h,null),o=!0},p:R,i(v){o||(ve(d.$$.fragment,v),o=!0)},o(v){he(d.$$.fragment,v),o=!1},d(v){v&&g(n),de(d)}}}function be(l){let n=q.filter(s=>s.experienced_violence_yn==1),e=q.filter(s=>s.experienced_violence_yn==0),a=Object.keys(n).length/(Object.keys(n).length+Object.keys(e).length);return[Number(a).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class xe extends te{constructor(n){super(),le(this,n,be,we,se,{})}}export{xe as A,ye as S};
