import{S as ee,i as te,s as le,k as I,J as O,a as T,l as D,m as k,K as B,h as d,c as C,n as r,L as H,p as N,b as S,G as g,H as L,M as se,N as x,O as ae,q as V,r as A,u as re,y as ne,z as ie,A as oe,g as ce,d as _e,B as he}from"./index.6dba7111.js";import"./transform.90f3feb5.js";import{r as G,I as J,o as K,p as X,h as Y,a as R}from"./all_violence_data.2787399c.js";function Q(t,a,e){const s=t.slice();return s[20]=a[e],s[22]=e,s}function U(t){let a,e,s,c,l,u,p,h,_,i,f,n,v,m,E;function b(...w){return t[15](t[20],...w)}return{c(){a=O("g"),e=O("svg"),s=O("svg"),c=O("g"),l=O("path"),_=O("clipPath"),i=O("circle"),this.h()},l(w){a=B(w,"g",{class:!0,transform:!0});var y=k(a);e=B(y,"svg",{class:!0,height:!0,width:!0,viewBox:!0});var F=k(e);s=B(F,"svg",{xmlns:!0,"xml:space":!0,height:!0,width:!0,version:!0,x:!0,y:!0,"xmlns:ns":!0,"enable-background":!0,viewBox:!0});var P=k(s);c=B(P,"g",{"ns:extraneous":!0,class:!0});var j=k(c);l=B(j,"path",{"stroke-width":!0,d:!0,fill:!0,"fill-opacity":!0}),k(l).forEach(d),j.forEach(d),P.forEach(d),F.forEach(d),_=B(y,"clipPath",{id:!0});var o=k(_);i=B(o,"circle",{r:!0}),k(i).forEach(d),o.forEach(d),y.forEach(d),this.h()},h(){r(l,"stroke-width","1.25"),r(l,"d","m62.096 8.5859c-5.208 0-9.424 4.2191-9.424 9.4261 0.001 5.203 4.217 9.424 9.424 9.424 5.202 0 9.422-4.221 9.422-9.424 0-5.208-4.22-9.4261-9.422-9.4261zm-10.41 21.268c-6.672 0-12.131 5.407-12.131 12.07v29.23c0 2.275 1.791 4.123 4.07 4.123 2.28 0 4.127-1.846 4.127-4.123v-26.355h2.102s0.048 68.811 0.048 73.331c0 3.05 2.478 5.53 5.532 5.53 3.052 0 5.525-2.48 5.525-5.53v-42.581h2.27v42.581c0 3.05 2.473 5.53 5.531 5.53 3.054 0 5.549-2.48 5.549-5.53v-73.331h2.127v26.355c0 2.275 1.85 4.123 4.126 4.123 2.28 0 4.073-1.846 4.073-4.123v-29.23c0-6.663-5.463-12.07-12.129-12.07h-20.82z"),r(l,"fill",u=t[0]?t[4](t[0][t[20].data]):$),r(l,"fill-opacity",ve),r(c,"ns:extraneous","self"),r(c,"class","svelte-1aa1kfe"),r(s,"xmlns","http://www.w3.org/2000/svg"),r(s,"xml:space","preserve"),r(s,"height","132.24px"),r(s,"width","124.19px"),r(s,"version","1.1"),r(s,"x","0px"),r(s,"y","0px"),r(s,"xmlns:ns","&#38;ns_ai;"),r(s,"enable-background","new 0 0 124.189 132.243"),r(s,"viewBox","75 0 44.189 132.243"),r(e,"class","person svelte-1aa1kfe"),r(e,"height",p=2*t[20].r),r(e,"width",h=2*t[20].r),r(e,"viewBox","0 0 100 120"),r(i,"r",f=t[20].r),r(_,"id",n=`${t[9]}-clip-${t[20].data}`),r(a,"class","node svelte-1aa1kfe"),r(a,"transform",v="translate("+t[20].x+","+t[20].y+")")},m(w,y){S(w,a,y),g(a,e),g(e,s),g(s,c),g(c,l),g(a,_),g(_,i),m||(E=[x(e,"mouseover",b),x(e,"mouseout",t[16])],m=!0)},p(w,y){t=w,y&49&&u!==(u=t[0]?t[4](t[0][t[20].data]):$)&&r(l,"fill",u),y&32&&p!==(p=2*t[20].r)&&r(e,"height",p),y&32&&h!==(h=2*t[20].r)&&r(e,"width",h),y&32&&f!==(f=t[20].r)&&r(i,"r",f),y&32&&n!==(n=`${t[9]}-clip-${t[20].data}`)&&r(_,"id",n),y&32&&v!==(v="translate("+t[20].x+","+t[20].y+")")&&r(a,"transform",v)},d(w){w&&d(a),m=!1,ae(E)}}}function W(t){let a,e=t[3][t[1].data]+"",s,c;return{c(){a=V("Type of violence reported: `"),s=V(e),c=V("`")},l(l){a=A(l,"Type of violence reported: `"),s=A(l,e),c=A(l,"`")},m(l,u){S(l,a,u),S(l,s,u),S(l,c,u)},p(l,u){u&10&&e!==(e=l[3][l[1].data]+"")&&re(s,e)},d(l){l&&d(a),l&&d(s),l&&d(c)}}}function ue(t){let a,e,s,c,l,u,p=t[5].leaves(),h=[];for(let i=0;i<p.length;i+=1)h[i]=U(Q(t,p,i));let _=t[1]!==-1&&W(t);return{c(){a=I("main"),e=I("div"),s=O("svg");for(let i=0;i<h.length;i+=1)h[i].c();c=T(),l=I("div"),_&&_.c(),this.h()},l(i){a=D(i,"MAIN",{class:!0});var f=k(a);e=D(f,"DIV",{class:!0});var n=k(e);s=B(n,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,class:!0});var v=k(s);for(let E=0;E<h.length;E+=1)h[E].l(v);v.forEach(d),c=C(n),l=D(n,"DIV",{class:!0,style:!0});var m=k(l);_&&_.l(m),m.forEach(d),n.forEach(d),f.forEach(d),this.h()},h(){r(s,"width",M),r(s,"height",t[6]),r(s,"viewBox",-t[7]+" "+-t[8]+" "+M+" "+t[6]),r(s,"fill",fe),r(s,"class","person svelte-1aa1kfe"),r(l,"class",u=H(t[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1aa1kfe"),N(l,"left",t[2].x+2+"px"),N(l,"top",t[2].y-1e3+"px"),r(e,"class","violence_grid svelte-1aa1kfe"),r(a,"class","circles svelte-1aa1kfe")},m(i,f){S(i,a,f),g(a,e),g(e,s);for(let n=0;n<h.length;n+=1)h[n]&&h[n].m(s,null);g(e,c),g(e,l),_&&_.m(l,null)},p(i,[f]){if(f&567){p=i[5].leaves();let n;for(n=0;n<p.length;n+=1){const v=Q(i,p,n);h[n]?h[n].p(v,f):(h[n]=U(v),h[n].c(),h[n].m(s,null))}for(;n<h.length;n+=1)h[n].d(1);h.length=p.length}i[1]!==-1?_?_.p(i,f):(_=W(i),_.c(),_.m(l,null)):_&&(_.d(1),_=null),f&2&&u!==(u=H(i[1]===-1?"tooltip-hidden":"tooltip-visible")+" svelte-1aa1kfe")&&r(l,"class",u),f&4&&N(l,"left",i[2].x+2+"px"),f&4&&N(l,"top",i[2].y-1e3+"px")},i:L,o:L,d(i){i&&d(a),se(h,i),_&&_.d()}}}const M=800,Z=3,z=1,fe="black",$="#ccc",ve=.9;function pe(t,a,e){let{data_dot:s=[]}=a,c=Object.values(s),l=-1,u={x:0,y:0};const p=M,h=z,_=z,i=z,f=z;c.map(o=>o);let n=c.map(o=>o.experienced_violence_yn),v=c.map(o=>o.experienced_violence_yn),m=G(n.length).filter(o=>n[o]>=0),E=c.map(o=>o.violence_strings),b=m.map(o=>v[o]);b=new J(b);let w=K(b).domain([0,1]).range(["#2E2F48","#F8553D"]);const y=`O-${Math.random().toString(16).slice(2)}`;let F=X().size([M-h-_,p-i-f]).radius(o=>10).padding(Z)(Y({children:m}).sum(o=>n[o]));const P=(o,q)=>{e(1,l=o),e(2,u={x:q.pageX,y:q.pageY})},j=o=>{e(1,l=-1)};return t.$$set=o=>{"data_dot"in o&&e(10,s=o.data_dot)},t.$$.update=()=>{t.$$.dirty&1024&&e(11,c=Object.values(s)),t.$$.dirty&30721&&(c.map(o=>o),e(12,n=c.map(o=>o.experienced_violence_yn)),e(0,v=c.map(o=>o.experienced_violence_yn)),e(13,m=G(n.length).filter(o=>n[o]>=0)),e(3,E=c.map(o=>o.violence_strings)),e(14,b=m.map(o=>v[o])),e(14,b=new J(b)),e(4,w=K(b).domain([0,1]).range(["#2E2F48","#F8553D"]))),t.$$.dirty&12288&&e(5,F=X().size([M-h-_,p-i-f]).radius(o=>8).padding(Z)(Y({children:m}).sum(o=>n[o])))},[v,l,u,E,w,F,p,h,i,y,s,c,n,m,b,P,j]}class de extends ee{constructor(a){super(),te(this,a,pe,ue,le,{data_dot:10})}}function me(t){let a,e,s,c,l,u,p,h,_,i,f,n;return f=new de({props:{data_dot:R}}),{c(){a=I("main"),e=I("h3"),s=V("Migrants reporting violence"),c=T(),l=I("div"),u=I("section"),p=I("p"),h=V("Rate of reported violence: "),_=V(t[0]),i=T(),ne(f.$$.fragment),this.h()},l(v){a=D(v,"MAIN",{class:!0});var m=k(a);e=D(m,"H3",{style:!0,class:!0});var E=k(e);s=A(E,"Migrants reporting violence"),E.forEach(d),c=C(m),l=D(m,"DIV",{class:!0});var b=k(l);u=D(b,"SECTION",{class:!0});var w=k(u);p=D(w,"P",{class:!0});var y=k(p);h=A(y,"Rate of reported violence: "),_=A(y,t[0]),y.forEach(d),i=C(w),ie(f.$$.fragment,w),w.forEach(d),b.forEach(d),m.forEach(d),this.h()},h(){N(e,"margin-top","10px"),N(e,"color","#F8553D"),r(e,"class","svelte-oyi84i"),r(p,"class","svelte-oyi84i"),r(u,"class","humans svelte-oyi84i"),r(l,"class","violence_grid svelte-oyi84i"),r(a,"class","svelte-oyi84i")},m(v,m){S(v,a,m),g(a,e),g(e,s),g(a,c),g(a,l),g(l,u),g(u,p),g(p,h),g(p,_),g(u,i),oe(f,u,null),n=!0},p:L,i(v){n||(ce(f.$$.fragment,v),n=!0)},o(v){_e(f.$$.fragment,v),n=!1},d(v){v&&d(a),he(f)}}}function ge(t){let a=R.filter(l=>l.experienced_violence_yn==1),e=R.filter(l=>l.experienced_violence_yn==0),s=Object.keys(a).length/(Object.keys(a).length+Object.keys(e).length);return[Number(s).toLocaleString(void 0,{style:"percent",minimumFractionDigits:2})]}class be extends ee{constructor(a){super(),te(this,a,ge,me,le,{})}}export{be as A,de as N};
